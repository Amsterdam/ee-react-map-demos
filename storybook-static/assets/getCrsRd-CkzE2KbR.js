import{c as ao,g as ro}from"./index-l2PZgWEW.js";var Ln={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,s){(function(a,h){h(s)})(ao,function(a){var h="1.9.4";function o(t){var i,n,r,l;for(n=1,r=arguments.length;n<r;n++){l=arguments[n];for(i in l)t[i]=l[i]}return t}var u=Object.create||function(){function t(){}return function(i){return t.prototype=i,new t}}();function c(t,i){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(i,r.length?r.concat(n.call(arguments)):arguments)}}var f=0;function _(t){return"_leaflet_id"in t||(t._leaflet_id=++f),t._leaflet_id}function m(t,i,n){var r,l,d,v;return v=function(){r=!1,l&&(d.apply(n,l),l=!1)},d=function(){r?l=arguments:(t.apply(n,arguments),setTimeout(v,i),r=!0)},d}function y(t,i,n){var r=i[1],l=i[0],d=r-l;return t===r&&n?t:((t-l)%d+d)%d+l}function p(){return!1}function x(t,i){if(i===!1)return t;var n=Math.pow(10,i===void 0?6:i);return Math.round(t*n)/n}function P(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function b(t){return P(t).split(/\s+/)}function w(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?u(t.options):{});for(var n in i)t.options[n]=i[n];return t.options}function S(t,i,n){var r=[];for(var l in t)r.push(encodeURIComponent(n?l.toUpperCase():l)+"="+encodeURIComponent(t[l]));return(!i||i.indexOf("?")===-1?"?":"&")+r.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function R(t,i){return t.replace(O,function(n,r){var l=i[r];if(l===void 0)throw new Error("No value provided for variable "+n);return typeof l=="function"&&(l=l(i)),l})}var z=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function V(t,i){for(var n=0;n<t.length;n++)if(t[n]===i)return n;return-1}var W="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var lt=0;function Y(t){var i=+new Date,n=Math.max(0,16-(i-lt));return lt=i+n,window.setTimeout(t,n)}var yt=window.requestAnimationFrame||H("RequestAnimationFrame")||Y,kt=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function nt(t,i,n){if(n&&yt===Y)t.call(i);else return yt.call(window,c(t,i))}function ct(t){t&&kt.call(window,t)}var Ge={__proto__:null,extend:o,create:u,bind:c,get lastId(){return f},stamp:_,throttle:m,wrapNum:y,falseFn:p,formatNum:x,trim:P,splitWords:b,setOptions:w,getParamString:S,template:R,isArray:z,indexOf:V,emptyImageUrl:W,requestFn:yt,cancelFn:kt,requestAnimFrame:nt,cancelAnimFrame:ct};function Ht(){}Ht.extend=function(t){var i=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=i.__super__=this.prototype,r=u(n);r.constructor=i,i.prototype=r;for(var l in this)Object.prototype.hasOwnProperty.call(this,l)&&l!=="prototype"&&l!=="__super__"&&(i[l]=this[l]);return t.statics&&o(i,t.statics),t.includes&&(za(t.includes),o.apply(null,[r].concat(t.includes))),o(r,t),delete r.statics,delete r.includes,r.options&&(r.options=n.options?u(n.options):{},o(r.options,t.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var d=0,v=r._initHooks.length;d<v;d++)r._initHooks[d].call(this)}},i},Ht.include=function(t){var i=this.prototype.options;return o(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},Ht.mergeOptions=function(t){return o(this.prototype.options,t),this},Ht.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),n=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function za(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=z(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Lt={on:function(t,i,n){if(typeof t=="object")for(var r in t)this._on(r,t[r],i);else{t=b(t);for(var l=0,d=t.length;l<d;l++)this._on(t[l],i,n)}return this},off:function(t,i,n){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var r in t)this._off(r,t[r],i);else{t=b(t);for(var l=arguments.length===1,d=0,v=t.length;d<v;d++)l?this._off(t[d]):this._off(t[d],i,n)}return this},_on:function(t,i,n,r){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}if(this._listens(t,i,n)===!1){n===this&&(n=void 0);var l={fn:i,ctx:n};r&&(l.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(l)}},_off:function(t,i,n){var r,l,d;if(this._events&&(r=this._events[t],!!r)){if(arguments.length===1){if(this._firingCount)for(l=0,d=r.length;l<d;l++)r[l].fn=p;delete this._events[t];return}if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}var v=this._listens(t,i,n);if(v!==!1){var g=r[v];this._firingCount&&(g.fn=p,this._events[t]=r=r.slice()),r.splice(v,1)}}},fire:function(t,i,n){if(!this.listens(t,n))return this;var r=o({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var l=this._events[t];if(l){this._firingCount=this._firingCount+1||1;for(var d=0,v=l.length;d<v;d++){var g=l[d],M=g.fn;g.once&&this.off(t,M,g.ctx),M.call(g.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,i,n,r){typeof t!="string"&&console.warn('"string" type argument expected');var l=i;typeof i!="function"&&(r=!!i,l=void 0,n=void 0);var d=this._events&&this._events[t];if(d&&d.length&&this._listens(t,l,n)!==!1)return!0;if(r){for(var v in this._eventParents)if(this._eventParents[v].listens(t,i,n,r))return!0}return!1},_listens:function(t,i,n){if(!this._events)return!1;var r=this._events[t]||[];if(!i)return!!r.length;n===this&&(n=void 0);for(var l=0,d=r.length;l<d;l++)if(r[l].fn===i&&r[l].ctx===n)return l;return!1},once:function(t,i,n){if(typeof t=="object")for(var r in t)this._on(r,t[r],i,!0);else{t=b(t);for(var l=0,d=t.length;l<d;l++)this._on(t[l],i,n,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[_(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[_(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,o({layer:t.target,propagatedFrom:t.target},t),!0)}};Lt.addEventListener=Lt.on,Lt.removeEventListener=Lt.clearAllEventListeners=Lt.off,Lt.addOneTimeEventListener=Lt.once,Lt.fireEvent=Lt.fire,Lt.hasEventListeners=Lt.listens;var Ii=Ht.extend(Lt);function D(t,i,n){this.x=n?Math.round(t):t,this.y=n?Math.round(i):i}var kn=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};D.prototype={clone:function(){return new D(this.x,this.y)},add:function(t){return this.clone()._add(Z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(Z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new D(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new D(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=kn(this.x),this.y=kn(this.y),this},distanceTo:function(t){t=Z(t);var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)},equals:function(t){return t=Z(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=Z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function Z(t,i,n){return t instanceof D?t:z(t)?new D(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new D(t.x,t.y):new D(t,i,n)}function tt(t,i){if(t)for(var n=i?[t,i]:t,r=0,l=n.length;r<l;r++)this.extend(n[r])}tt.prototype={extend:function(t){var i,n;if(!t)return this;if(t instanceof D||typeof t[0]=="number"||"x"in t)i=n=Z(t);else if(t=Mt(t),i=t.min,n=t.max,!i||!n)return this;return!this.min&&!this.max?(this.min=i.clone(),this.max=n.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(t){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,n;return typeof t[0]=="number"||t instanceof D?t=Z(t):t=Mt(t),t instanceof tt?(i=t.min,n=t.max):i=n=t,i.x>=this.min.x&&n.x<=this.max.x&&i.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=Mt(t);var i=this.min,n=this.max,r=t.min,l=t.max,d=l.x>=i.x&&r.x<=n.x,v=l.y>=i.y&&r.y<=n.y;return d&&v},overlaps:function(t){t=Mt(t);var i=this.min,n=this.max,r=t.min,l=t.max,d=l.x>i.x&&r.x<n.x,v=l.y>i.y&&r.y<n.y;return d&&v},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var i=this.min,n=this.max,r=Math.abs(i.x-n.x)*t,l=Math.abs(i.y-n.y)*t;return Mt(Z(i.x-r,i.y-l),Z(n.x+r,n.y+l))},equals:function(t){return t?(t=Mt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Mt(t,i){return!t||t instanceof tt?t:new tt(t,i)}function xt(t,i){if(t)for(var n=i?[t,i]:t,r=0,l=n.length;r<l;r++)this.extend(n[r])}xt.prototype={extend:function(t){var i=this._southWest,n=this._northEast,r,l;if(t instanceof Q)r=t,l=t;else if(t instanceof xt){if(r=t._southWest,l=t._northEast,!r||!l)return this}else return t?this.extend(U(t)||rt(t)):this;return!i&&!n?(this._southWest=new Q(r.lat,r.lng),this._northEast=new Q(l.lat,l.lng)):(i.lat=Math.min(r.lat,i.lat),i.lng=Math.min(r.lng,i.lng),n.lat=Math.max(l.lat,n.lat),n.lng=Math.max(l.lng,n.lng)),this},pad:function(t){var i=this._southWest,n=this._northEast,r=Math.abs(i.lat-n.lat)*t,l=Math.abs(i.lng-n.lng)*t;return new xt(new Q(i.lat-r,i.lng-l),new Q(n.lat+r,n.lng+l))},getCenter:function(){return new Q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Q(this.getNorth(),this.getWest())},getSouthEast:function(){return new Q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof Q||"lat"in t?t=U(t):t=rt(t);var i=this._southWest,n=this._northEast,r,l;return t instanceof xt?(r=t.getSouthWest(),l=t.getNorthEast()):r=l=t,r.lat>=i.lat&&l.lat<=n.lat&&r.lng>=i.lng&&l.lng<=n.lng},intersects:function(t){t=rt(t);var i=this._southWest,n=this._northEast,r=t.getSouthWest(),l=t.getNorthEast(),d=l.lat>=i.lat&&r.lat<=n.lat,v=l.lng>=i.lng&&r.lng<=n.lng;return d&&v},overlaps:function(t){t=rt(t);var i=this._southWest,n=this._northEast,r=t.getSouthWest(),l=t.getNorthEast(),d=l.lat>i.lat&&r.lat<n.lat,v=l.lng>i.lng&&r.lng<n.lng;return d&&v},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=rt(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function rt(t,i){return t instanceof xt?t:new xt(t,i)}function Q(t,i,n){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,n!==void 0&&(this.alt=+n)}Q.prototype={equals:function(t,i){if(!t)return!1;t=U(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+x(this.lat,t)+", "+x(this.lng,t)+")"},distanceTo:function(t){return Qt.distance(this,U(t))},wrap:function(){return Qt.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,n=i/Math.cos(Math.PI/180*this.lat);return rt([this.lat-i,this.lng-n],[this.lat+i,this.lng+n])},clone:function(){return new Q(this.lat,this.lng,this.alt)}};function U(t,i,n){return t instanceof Q?t:z(t)&&typeof t[0]!="object"?t.length===3?new Q(t[0],t[1],t[2]):t.length===2?new Q(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new Q(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new Q(t,i,n)}var Ut={latLngToPoint:function(t,i){var n=this.projection.project(t),r=this.scale(i);return this.transformation._transform(n,r)},pointToLatLng:function(t,i){var n=this.scale(i),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,n=this.scale(t),r=this.transformation.transform(i.min,n),l=this.transformation.transform(i.max,n);return new tt(r,l)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?y(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?y(t.lat,this.wrapLat,!0):t.lat,r=t.alt;return new Q(n,i,r)},wrapLatLngBounds:function(t){var i=t.getCenter(),n=this.wrapLatLng(i),r=i.lat-n.lat,l=i.lng-n.lng;if(r===0&&l===0)return t;var d=t.getSouthWest(),v=t.getNorthEast(),g=new Q(d.lat-r,d.lng-l),M=new Q(v.lat-r,v.lng-l);return new xt(g,M)}},Qt=o({},Ut,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var n=Math.PI/180,r=t.lat*n,l=i.lat*n,d=Math.sin((i.lat-t.lat)*n/2),v=Math.sin((i.lng-t.lng)*n/2),g=d*d+Math.cos(r)*Math.cos(l)*v*v,M=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g));return this.R*M}}),Rn=6378137,Fe={R:Rn,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),l=Math.sin(r*i);return new D(this.R*t.lng*i,this.R*Math.log((1+l)/(1-l))/2)},unproject:function(t){var i=180/Math.PI;return new Q((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:function(){var t=Rn*Math.PI;return new tt([-t,-t],[t,t])}()};function We(t,i,n,r){if(z(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=n,this._d=r}We.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new D((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function Oi(t,i,n,r){return new We(t,i,n,r)}var He=o({},Qt,{code:"EPSG:3857",projection:Fe,transformation:function(){var t=.5/(Math.PI*Fe.R);return Oi(t,.5,-t,.5)}()}),ka=o({},He,{code:"EPSG:900913"});function Bn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Zn(t,i){var n="",r,l,d,v,g,M;for(r=0,d=t.length;r<d;r++){for(g=t[r],l=0,v=g.length;l<v;l++)M=g[l],n+=(l?"L":"M")+M.x+" "+M.y;n+=i?N.svg?"z":"x":""}return n||"M0 0"}var Ue=document.documentElement.style,le="ActiveXObject"in window,Ra=le&&!document.addEventListener,Dn="msLaunchUri"in navigator&&!("documentMode"in document),$e=Rt("webkit"),qn=Rt("android"),Gn=Rt("android 2")||Rt("android 3"),Ba=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Za=qn&&Rt("Google")&&Ba<537&&!("AudioNode"in window),je=!!window.opera,Fn=!Dn&&Rt("chrome"),Wn=Rt("gecko")&&!$e&&!je&&!le,Da=!Fn&&Rt("safari"),Hn=Rt("phantom"),Un="OTransition"in Ue,qa=navigator.platform.indexOf("Win")===0,$n=le&&"transition"in Ue,Ve="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Gn,jn="MozPerspective"in Ue,Ga=!window.L_DISABLE_3D&&($n||Ve||jn)&&!Un&&!Hn,Ni=typeof orientation<"u"||Rt("mobile"),Fa=Ni&&$e,Wa=Ni&&Ve,Vn=!window.PointerEvent&&window.MSPointerEvent,Kn=!!(window.PointerEvent||Vn),Xn="ontouchstart"in window||!!window.TouchEvent,Ha=!window.L_NO_TOUCH&&(Xn||Kn),Ua=Ni&&je,$a=Ni&&Wn,ja=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Va=function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",p,i),window.removeEventListener("testPassiveEventSupport",p,i)}catch{}return t}(),Ka=function(){return!!document.createElement("canvas").getContext}(),Ke=!!(document.createElementNS&&Bn("svg").createSVGRect),Xa=!!Ke&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Qa=!Ke&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}(),Ja=navigator.platform.indexOf("Mac")===0,Ya=navigator.platform.indexOf("Linux")===0;function Rt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var N={ie:le,ielt9:Ra,edge:Dn,webkit:$e,android:qn,android23:Gn,androidStock:Za,opera:je,chrome:Fn,gecko:Wn,safari:Da,phantom:Hn,opera12:Un,win:qa,ie3d:$n,webkit3d:Ve,gecko3d:jn,any3d:Ga,mobile:Ni,mobileWebkit:Fa,mobileWebkit3d:Wa,msPointer:Vn,pointer:Kn,touch:Ha,touchNative:Xn,mobileOpera:Ua,mobileGecko:$a,retina:ja,passiveEvents:Va,canvas:Ka,svg:Ke,vml:Qa,inlineSvg:Xa,mac:Ja,linux:Ya},Qn=N.msPointer?"MSPointerDown":"pointerdown",Jn=N.msPointer?"MSPointerMove":"pointermove",Yn=N.msPointer?"MSPointerUp":"pointerup",ts=N.msPointer?"MSPointerCancel":"pointercancel",Xe={touchstart:Qn,touchmove:Jn,touchend:Yn,touchcancel:ts},is={touchstart:ar,touchmove:ue,touchend:ue,touchcancel:ue},fi={},es=!1;function tr(t,i,n){return i==="touchstart"&&sr(),is[i]?(n=is[i].bind(this,n),t.addEventListener(Xe[i],n,!1),n):(console.warn("wrong event specified:",i),p)}function ir(t,i,n){if(!Xe[i]){console.warn("wrong event specified:",i);return}t.removeEventListener(Xe[i],n,!1)}function er(t){fi[t.pointerId]=t}function nr(t){fi[t.pointerId]&&(fi[t.pointerId]=t)}function ns(t){delete fi[t.pointerId]}function sr(){es||(document.addEventListener(Qn,er,!0),document.addEventListener(Jn,nr,!0),document.addEventListener(Yn,ns,!0),document.addEventListener(ts,ns,!0),es=!0)}function ue(t,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var n in fi)i.touches.push(fi[n]);i.changedTouches=[i],t(i)}}function ar(t,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&dt(i),ue(t,i)}function rr(t){var i={},n,r;for(r in t)n=t[r],i[r]=n&&n.bind?n.bind(t):n;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var or=200;function hr(t,i){t.addEventListener("dblclick",i);var n=0,r;function l(d){if(d.detail!==1){r=d.detail;return}if(!(d.pointerType==="mouse"||d.sourceCapabilities&&!d.sourceCapabilities.firesTouchEvents)){var v=hs(d);if(!(v.some(function(M){return M instanceof HTMLLabelElement&&M.attributes.for})&&!v.some(function(M){return M instanceof HTMLInputElement||M instanceof HTMLSelectElement}))){var g=Date.now();g-n<=or?(r++,r===2&&i(rr(d))):r=1,n=g}}}return t.addEventListener("click",l),{dblclick:i,simDblclick:l}}function lr(t,i){t.removeEventListener("dblclick",i.dblclick),t.removeEventListener("click",i.simDblclick)}var Qe=de(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),zi=de(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ss=zi==="webkitTransition"||zi==="OTransition"?zi+"End":"transitionend";function as(t){return typeof t=="string"?document.getElementById(t):t}function ki(t,i){var n=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!n||n==="auto")&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[i]:null}return n==="auto"?null:n}function j(t,i,n){var r=document.createElement(t);return r.className=i||"",n&&n.appendChild(r),r}function it(t){var i=t.parentNode;i&&i.removeChild(t)}function fe(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ci(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function di(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function Je(t,i){if(t.classList!==void 0)return t.classList.contains(i);var n=ce(t);return n.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(n)}function G(t,i){if(t.classList!==void 0)for(var n=b(i),r=0,l=n.length;r<l;r++)t.classList.add(n[r]);else if(!Je(t,i)){var d=ce(t);Ye(t,(d?d+" ":"")+i)}}function st(t,i){t.classList!==void 0?t.classList.remove(i):Ye(t,P((" "+ce(t)+" ").replace(" "+i+" "," ")))}function Ye(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function ce(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Ct(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&ur(t,i)}function ur(t,i){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch{if(i===1)return}i=Math.round(i*100),n?(n.Enabled=i!==100,n.Opacity=i):t.style.filter+=" progid:"+r+"(opacity="+i+")"}function de(t){for(var i=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in i)return t[n];return!1}function ni(t,i,n){var r=i||new D(0,0);t.style[Qe]=(N.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function ot(t,i){t._leaflet_pos=i,N.any3d?ni(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function si(t){return t._leaflet_pos||new D(0,0)}var Ri,Bi,tn;if("onselectstart"in document)Ri=function(){q(window,"selectstart",dt)},Bi=function(){J(window,"selectstart",dt)};else{var Zi=de(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ri=function(){if(Zi){var t=document.documentElement.style;tn=t[Zi],t[Zi]="none"}},Bi=function(){Zi&&(document.documentElement.style[Zi]=tn,tn=void 0)}}function en(){q(window,"dragstart",dt)}function nn(){J(window,"dragstart",dt)}var _e,sn;function an(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(me(),_e=t,sn=t.style.outlineStyle,t.style.outlineStyle="none",q(window,"keydown",me))}function me(){_e&&(_e.style.outlineStyle=sn,_e=void 0,sn=void 0,J(window,"keydown",me))}function rs(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function rn(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var fr={__proto__:null,TRANSFORM:Qe,TRANSITION:zi,TRANSITION_END:ss,get:as,getStyle:ki,create:j,remove:it,empty:fe,toFront:ci,toBack:di,hasClass:Je,addClass:G,removeClass:st,setClass:Ye,getClass:ce,setOpacity:Ct,testProp:de,setTransform:ni,setPosition:ot,getPosition:si,get disableTextSelection(){return Ri},get enableTextSelection(){return Bi},disableImageDrag:en,enableImageDrag:nn,preventOutline:an,restoreOutline:me,getSizedParentNode:rs,getScale:rn};function q(t,i,n,r){if(i&&typeof i=="object")for(var l in i)hn(t,l,i[l],n);else{i=b(i);for(var d=0,v=i.length;d<v;d++)hn(t,i[d],n,r)}return this}var Bt="_leaflet_events";function J(t,i,n,r){if(arguments.length===1)os(t),delete t[Bt];else if(i&&typeof i=="object")for(var l in i)ln(t,l,i[l],n);else if(i=b(i),arguments.length===2)os(t,function(g){return V(i,g)!==-1});else for(var d=0,v=i.length;d<v;d++)ln(t,i[d],n,r);return this}function os(t,i){for(var n in t[Bt]){var r=n.split(/\d/)[0];(!i||i(r))&&ln(t,r,null,null,n)}}var on={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function hn(t,i,n,r){var l=i+_(n)+(r?"_"+_(r):"");if(t[Bt]&&t[Bt][l])return this;var d=function(g){return n.call(r||t,g||window.event)},v=d;!N.touchNative&&N.pointer&&i.indexOf("touch")===0?d=tr(t,i,d):N.touch&&i==="dblclick"?d=hr(t,d):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(on[i]||i,d,N.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(d=function(g){g=g||window.event,fn(t,g)&&v(g)},t.addEventListener(on[i],d,!1)):t.addEventListener(i,v,!1):t.attachEvent("on"+i,d),t[Bt]=t[Bt]||{},t[Bt][l]=d}function ln(t,i,n,r,l){l=l||i+_(n)+(r?"_"+_(r):"");var d=t[Bt]&&t[Bt][l];if(!d)return this;!N.touchNative&&N.pointer&&i.indexOf("touch")===0?ir(t,i,d):N.touch&&i==="dblclick"?lr(t,d):"removeEventListener"in t?t.removeEventListener(on[i]||i,d,!1):t.detachEvent("on"+i,d),t[Bt][l]=null}function ai(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function un(t){return hn(t,"wheel",ai),this}function Di(t){return q(t,"mousedown touchstart dblclick contextmenu",ai),t._leaflet_disable_click=!0,this}function dt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ri(t){return dt(t),ai(t),this}function hs(t){if(t.composedPath)return t.composedPath();for(var i=[],n=t.target;n;)i.push(n),n=n.parentNode;return i}function ls(t,i){if(!i)return new D(t.clientX,t.clientY);var n=rn(i),r=n.boundingClientRect;return new D((t.clientX-r.left)/n.x-i.clientLeft,(t.clientY-r.top)/n.y-i.clientTop)}var cr=N.linux&&N.chrome?window.devicePixelRatio:N.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function us(t){return N.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/cr:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function fn(t,i){var n=i.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch{return!1}return n!==t}var dr={__proto__:null,on:q,off:J,stopPropagation:ai,disableScrollPropagation:un,disableClickPropagation:Di,preventDefault:dt,stop:ri,getPropagationPath:hs,getMousePosition:ls,getWheelDelta:us,isExternalTarget:fn,addListener:q,removeListener:J},fs=Ii.extend({run:function(t,i,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=si(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=nt(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,n=this._duration*1e3;i<n?this._runFrame(this._easeOut(i/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var n=this._startPos.add(this._offset.multiplyBy(t));i&&n._round(),ot(this._el,n),this.fire("step")},_complete:function(){ct(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),$=Ii.extend({options:{crs:He,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=w(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(U(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=zi&&N.any3d&&!N.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),q(this._proxy,ss,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,n){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter(U(t),i,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom=o({animate:n.animate},n.zoom),n.pan=o({animate:n.animate,duration:n.duration},n.pan));var r=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,n.zoom):this._tryAnimatedPan(t,n.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i,n.pan&&n.pan.noMoveStart),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(N.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(N.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,n){var r=this.getZoomScale(i),l=this.getSize().divideBy(2),d=t instanceof D?t:this.latLngToContainerPoint(t),v=d.subtract(l).multiplyBy(1-1/r),g=this.containerPointToLatLng(l.add(v));return this.setView(g,i,{zoom:n})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():rt(t);var n=Z(i.paddingTopLeft||i.padding||[0,0]),r=Z(i.paddingBottomRight||i.padding||[0,0]),l=this.getBoundsZoom(t,!1,n.add(r));if(l=typeof i.maxZoom=="number"?Math.min(i.maxZoom,l):l,l===1/0)return{center:t.getCenter(),zoom:l};var d=r.subtract(n).divideBy(2),v=this.project(t.getSouthWest(),l),g=this.project(t.getNorthEast(),l),M=this.unproject(v.add(g).divideBy(2).add(d),l);return{center:M,zoom:l}},fitBounds:function(t,i){if(t=rt(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,i);return this.setView(n.center,n.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=Z(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new fs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){G(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,n){if(n=n||{},n.animate===!1||!N.any3d)return this.setView(t,i,n);this._stop();var r=this.project(this.getCenter()),l=this.project(t),d=this.getSize(),v=this._zoom;t=U(t),i=i===void 0?v:i;var g=Math.max(d.x,d.y),M=g*this.getZoomScale(v,i),T=l.distanceTo(r)||1,A=1.42,k=A*A;function F(ht){var Ce=ht?-1:1,io=ht?M:g,eo=M*M-g*g+Ce*k*k*T*T,no=2*io*k*T,wn=eo/no,Us=Math.sqrt(wn*wn+1)-wn,so=Us<1e-9?-18:Math.log(Us);return so}function vt(ht){return(Math.exp(ht)-Math.exp(-ht))/2}function ft(ht){return(Math.exp(ht)+Math.exp(-ht))/2}function Et(ht){return vt(ht)/ft(ht)}var wt=F(0);function yi(ht){return g*(ft(wt)/ft(wt+A*ht))}function Qr(ht){return g*(ft(wt)*Et(wt+A*ht)-vt(wt))/k}function Jr(ht){return 1-Math.pow(1-ht,1.5)}var Yr=Date.now(),Ws=(F(1)-wt)/A,to=n.duration?1e3*n.duration:1e3*Ws*.8;function Hs(){var ht=(Date.now()-Yr)/to,Ce=Jr(ht)*Ws;ht<=1?(this._flyToFrame=nt(Hs,this),this._move(this.unproject(r.add(l.subtract(r).multiplyBy(Qr(Ce)/T)),v),this.getScaleZoom(g/yi(Ce),v),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),Hs.call(this),this},flyToBounds:function(t,i){var n=this._getBoundsCenterZoom(t,i);return this.flyTo(n.center,n.zoom,i)},setMaxBounds:function(t){return t=rt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,rt(t));return n.equals(r)||this.panTo(r,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var n=Z(i.paddingTopLeft||i.padding||[0,0]),r=Z(i.paddingBottomRight||i.padding||[0,0]),l=this.project(this.getCenter()),d=this.project(t),v=this.getPixelBounds(),g=Mt([v.min.add(n),v.max.subtract(r)]),M=g.getSize();if(!g.contains(d)){this._enforcingBounds=!0;var T=d.subtract(g.getCenter()),A=g.extend(d).getSize().subtract(M);l.x+=T.x<0?-A.x:A.x,l.y+=T.y<0?-A.y:A.y,this.panTo(this.unproject(l),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=o({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),r=i.divideBy(2).round(),l=n.divideBy(2).round(),d=r.subtract(l);return!d.x&&!d.y?this:(t.animate&&t.pan?this.panBy(d):(t.pan&&this._rawPanBy(d),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:n}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=o({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=c(this._handleGeolocationResponse,this),n=c(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,n,t):navigator.geolocation.getCurrentPosition(i,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var i=t.code,n=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var i=t.coords.latitude,n=t.coords.longitude,r=new Q(i,n),l=r.toBounds(t.coords.accuracy*2),d=this._locateOptions;if(d.setView){var v=this.getBoundsZoom(l);this.setView(r,d.maxZoom?Math.min(v,d.maxZoom):v)}var g={latlng:r,bounds:l,timestamp:t.timestamp};for(var M in t.coords)typeof t.coords[M]=="number"&&(g[M]=t.coords[M]);this.fire("locationfound",g)}},addHandler:function(t,i){if(!i)return this;var n=this[t]=new i(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),it(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ct(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)it(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),r=j("div",n,i||this._mapPane);return t&&(this._panes[t]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new xt(i,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,n){t=rt(t),n=Z(n||[0,0]);var r=this.getZoom()||0,l=this.getMinZoom(),d=this.getMaxZoom(),v=t.getNorthWest(),g=t.getSouthEast(),M=this.getSize().subtract(n),T=Mt(this.project(g,r),this.project(v,r)).getSize(),A=N.any3d?this.options.zoomSnap:1,k=M.x/T.x,F=M.y/T.y,vt=i?Math.max(k,F):Math.min(k,F);return r=this.getScaleZoom(vt,r),A&&(r=Math.round(r/(A/100))*(A/100),r=i?Math.ceil(r/A)*A:Math.floor(r/A)*A),Math.max(l,Math.min(d,r))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var n=this._getTopLeftPoint(t,i);return new tt(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var n=this.options.crs;return i=i===void 0?this._zoom:i,n.scale(t)/n.scale(i)},getScaleZoom:function(t,i){var n=this.options.crs;i=i===void 0?this._zoom:i;var r=n.zoom(t*n.scale(i));return isNaN(r)?1/0:r},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(U(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(Z(t),i)},layerPointToLatLng:function(t){var i=Z(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(U(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(U(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(rt(t))},distance:function(t,i){return this.options.crs.distance(U(t),U(i))},containerPointToLayerPoint:function(t){return Z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return Z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(Z(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(t)))},mouseEventToContainerPoint:function(t){return ls(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=as(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");q(i,"scroll",this._onScroll,this),this._containerId=_(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&N.any3d,G(t,"leaflet-container"+(N.touch?" leaflet-touch":"")+(N.retina?" leaflet-retina":"")+(N.ielt9?" leaflet-oldie":"")+(N.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=ki(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&i!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ot(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(G(t.markerPane,"leaflet-zoom-hide"),G(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i,n){ot(this._mapPane,new D(0,0));var r=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var l=this._zoom!==i;this._moveStart(l,n)._move(t,i)._moveEnd(l),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,n,r){i===void 0&&(i=this._zoom);var l=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),r?n&&n.pinch&&this.fire("zoom",n):((l||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ct(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ot(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[_(this._container)]=this;var i=t?J:q;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),N.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ct(this._resizeRequest),this._resizeRequest=nt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var n=[],r,l=i==="mouseout"||i==="mouseover",d=t.target||t.srcElement,v=!1;d;){if(r=this._targets[_(d)],r&&(i==="click"||i==="preclick")&&this._draggableMoved(r)){v=!0;break}if(r&&r.listens(i,!0)&&(l&&!fn(d,t)||(n.push(r),l))||d===this._container)break;d=d.parentNode}return!n.length&&!v&&!l&&this.listens(i,!0)&&(n=[this]),n},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var i=t.target||t.srcElement;if(!(!this._loaded||i._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(i))){var n=t.type;n==="mousedown"&&an(i),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,n){if(t.type==="click"){var r=o({},t);r.type="preclick",this._fireDOMEvent(r,r.type,n)}var l=this._findEventTargets(t,i);if(n){for(var d=[],v=0;v<n.length;v++)n[v].listens(i,!0)&&d.push(n[v]);l=d.concat(l)}if(l.length){i==="contextmenu"&&dt(t);var g=l[0],M={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var T=g.getLatLng&&(!g._radius||g._radius<=10);M.containerPoint=T?this.latLngToContainerPoint(g.getLatLng()):this.mouseEventToContainerPoint(t),M.layerPoint=this.containerPointToLayerPoint(M.containerPoint),M.latlng=T?g.getLatLng():this.layerPointToLatLng(M.layerPoint)}for(v=0;v<l.length;v++)if(l[v].fire(i,M,!0),M.originalEvent._stopped||l[v].options.bubblingMouseEvents===!1&&V(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return si(this._mapPane)||new D(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var n=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var n=this.getSize()._divideBy(2);return this.project(t,i)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,n){var r=this._getNewPixelOrigin(n,i);return this.project(t,i)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,i,n){var r=this._getNewPixelOrigin(n,i);return Mt([this.project(t.getSouthWest(),i)._subtract(r),this.project(t.getNorthWest(),i)._subtract(r),this.project(t.getSouthEast(),i)._subtract(r),this.project(t.getNorthEast(),i)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,n){if(!n)return t;var r=this.project(t,i),l=this.getSize().divideBy(2),d=new tt(r.subtract(l),r.add(l)),v=this._getBoundsOffset(d,n,i);return Math.abs(v.x)<=1&&Math.abs(v.y)<=1?t:this.unproject(r.add(v),i)},_limitOffset:function(t,i){if(!i)return t;var n=this.getPixelBounds(),r=new tt(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,i))},_getBoundsOffset:function(t,i,n){var r=Mt(this.project(i.getNorthEast(),n),this.project(i.getSouthWest(),n)),l=r.min.subtract(t.min),d=r.max.subtract(t.max),v=this._rebound(l.x,-d.x),g=this._rebound(l.y,-d.y);return new D(v,g)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),n=this.getMaxZoom(),r=N.any3d?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(i,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){st(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var n=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,i),!0)},_createAnimProxy:function(){var t=this._proxy=j("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var n=Qe,r=this._proxy.style[n];ni(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),r===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){it(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();ni(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(i),l=this._getCenterOffset(t)._divideBy(1-1/r);return n.animate!==!0&&!this.getSize().contains(l)?!1:(nt(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,G(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&st(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function _r(t,i){return new $(t,i)}var Ot=Ht.extend({options:{position:"topright"},initialize:function(t){w(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return G(i,"leaflet-control"),n.indexOf("bottom")!==-1?r.insertBefore(i,r.firstChild):r.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(it(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),qi=function(t){return new Ot(t)};$.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",n=this._controlContainer=j("div",i+"control-container",this._container);function r(l,d){var v=i+l+" "+i+d;t[l+d]=j("div",v,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)it(this._controlCorners[t]);it(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var cs=Ot.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,i,n){w(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var r in t)this._addLayer(t[r],r);for(r in i)this._addLayer(i[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ot.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(_(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){G(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(G(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):st(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return st(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=j("div",t),n=this.options.collapsed;i.setAttribute("aria-haspopup",!0),Di(i),un(i);var r=this._section=j("section",t+"-list");n&&(this._map.on("click",this.collapse,this),q(i,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var l=this._layersLink=j("a",t+"-toggle",i);l.href="#",l.title="Layers",l.setAttribute("role","button"),q(l,{keydown:function(d){d.keyCode===13&&this._expandSafely()},click:function(d){dt(d),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=j("div",t+"-base",r),this._separator=j("div",t+"-separator",r),this._overlaysList=j("div",t+"-overlays",r),i.appendChild(r)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&_(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:n}),this.options.sortLayers&&this._layers.sort(c(function(r,l){return this.options.sortFunction(r.layer,l.layer,r.name,l.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;fe(this._baseLayersList),fe(this._overlaysList),this._layerControlInputs=[];var t,i,n,r,l=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),i=i||r.overlay,t=t||!r.overlay,l+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&l>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(_(t.target)),n=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;n&&this._map.fire(n,i)},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var i=document.createElement("label"),n=this._map.hasLayer(t.layer),r;t.overlay?(r=document.createElement("input"),r.type="checkbox",r.className="leaflet-control-layers-selector",r.defaultChecked=n):r=this._createRadioElement("leaflet-base-layers_"+_(this),n),this._layerControlInputs.push(r),r.layerId=_(t.layer),q(r,"click",this._onInputClick,this);var l=document.createElement("span");l.innerHTML=" "+t.name;var d=document.createElement("span");i.appendChild(d),d.appendChild(r),d.appendChild(l);var v=t.overlay?this._overlaysList:this._baseLayersList;return v.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,i,n,r=[],l=[];this._handlingClick=!0;for(var d=t.length-1;d>=0;d--)i=t[d],n=this._getLayer(i.layerId).layer,i.checked?r.push(n):i.checked||l.push(n);for(d=0;d<l.length;d++)this._map.hasLayer(l[d])&&this._map.removeLayer(l[d]);for(d=0;d<r.length;d++)this._map.hasLayer(r[d])||this._map.addLayer(r[d]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,n,r=this._map.getZoom(),l=t.length-1;l>=0;l--)i=t[l],n=this._getLayer(i.layerId).layer,i.disabled=n.options.minZoom!==void 0&&r<n.options.minZoom||n.options.maxZoom!==void 0&&r>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,q(t,"click",dt),this.expand();var i=this;setTimeout(function(){J(t,"click",dt),i._preventClick=!1})}}),mr=function(t,i,n){return new cs(t,i,n)},cn=Ot.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",n=j("div",i+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,i+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,i+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,n,r,l){var d=j("a",n,r);return d.innerHTML=t,d.href="#",d.title=i,d.setAttribute("role","button"),d.setAttribute("aria-label",i),Di(d),q(d,"click",ri),q(d,"click",l,this),q(d,"click",this._refocusOnMap,this),d},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";st(this._zoomInButton,i),st(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(G(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(G(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});$.mergeOptions({zoomControl:!0}),$.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))});var vr=function(t){return new cn(t)},ds=Ot.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",n=j("div",i),r=this.options;return this._addScales(r,i+"-line",n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,n){t.metric&&(this._mScale=j("div",i,n)),t.imperial&&(this._iScale=j("div",i,n))},_update:function(){var t=this._map,i=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),n=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,n,i/t)},_updateImperial:function(t){var i=t*3.2808399,n,r,l;i>5280?(n=i/5280,r=this._getRoundNum(n),this._updateScale(this._iScale,r+" mi",r/n)):(l=this._getRoundNum(i),this._updateScale(this._iScale,l+" ft",l/i))},_updateScale:function(t,i,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),n=t/i;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,i*n}}),pr=function(t){return new ds(t)},gr='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',dn=Ot.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(N.inlineSvg?gr+" ":"")+"Leaflet</a>"},initialize:function(t){w(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=j("div","leaflet-control-attribution"),Di(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});$.mergeOptions({attributionControl:!0}),$.addInitHook(function(){this.options.attributionControl&&new dn().addTo(this)});var yr=function(t){return new dn(t)};Ot.Layers=cs,Ot.Zoom=cn,Ot.Scale=ds,Ot.Attribution=dn,qi.layers=mr,qi.zoom=vr,qi.scale=pr,qi.attribution=yr;var Zt=Ht.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Zt.addTo=function(t,i){return t.addHandler(i,this),this};var Mr={Events:Lt},_s=N.touch?"touchstart mousedown":"mousedown",Jt=Ii.extend({options:{clickTolerance:3},initialize:function(t,i,n,r){w(this,r),this._element=t,this._dragStartTarget=i||t,this._preventOutline=n},enable:function(){this._enabled||(q(this._dragStartTarget,_s,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Jt._dragging===this&&this.finishDrag(!0),J(this._dragStartTarget,_s,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Je(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Jt._dragging===this&&this.finishDrag();return}if(!(Jt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Jt._dragging=this,this._preventOutline&&an(this._element),en(),Ri(),!this._moving)){this.fire("down");var i=t.touches?t.touches[0]:t,n=rs(this._element);this._startPoint=new D(i.clientX,i.clientY),this._startPos=si(this._element),this._parentScale=rn(n);var r=t.type==="mousedown";q(document,r?"mousemove":"touchmove",this._onMove,this),q(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,n=new D(i.clientX,i.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,dt(t),this._moved||(this.fire("dragstart"),this._moved=!0,G(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),G(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ot(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){st(document.body,"leaflet-dragging"),this._lastTarget&&(st(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),J(document,"mousemove touchmove",this._onMove,this),J(document,"mouseup touchend touchcancel",this._onUp,this),nn(),Bi();var i=this._moved&&this._moving;this._moving=!1,Jt._dragging=!1,i&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function ms(t,i,n){var r,l=[1,4,2,8],d,v,g,M,T,A,k,F;for(d=0,A=t.length;d<A;d++)t[d]._code=oi(t[d],i);for(g=0;g<4;g++){for(k=l[g],r=[],d=0,A=t.length,v=A-1;d<A;v=d++)M=t[d],T=t[v],M._code&k?T._code&k||(F=ve(T,M,k,i,n),F._code=oi(F,i),r.push(F)):(T._code&k&&(F=ve(T,M,k,i,n),F._code=oi(F,i),r.push(F)),r.push(M));t=r}return t}function vs(t,i){var n,r,l,d,v,g,M,T,A;if(!t||t.length===0)throw new Error("latlngs not passed");St(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var k=U([0,0]),F=rt(t),vt=F.getNorthWest().distanceTo(F.getSouthWest())*F.getNorthEast().distanceTo(F.getNorthWest());vt<1700&&(k=_n(t));var ft=t.length,Et=[];for(n=0;n<ft;n++){var wt=U(t[n]);Et.push(i.project(U([wt.lat-k.lat,wt.lng-k.lng])))}for(g=M=T=0,n=0,r=ft-1;n<ft;r=n++)l=Et[n],d=Et[r],v=l.y*d.x-d.y*l.x,M+=(l.x+d.x)*v,T+=(l.y+d.y)*v,g+=v*3;g===0?A=Et[0]:A=[M/g,T/g];var yi=i.unproject(Z(A));return U([yi.lat+k.lat,yi.lng+k.lng])}function _n(t){for(var i=0,n=0,r=0,l=0;l<t.length;l++){var d=U(t[l]);i+=d.lat,n+=d.lng,r++}return U([i/r,n/r])}var xr={__proto__:null,clipPolygon:ms,polygonCenter:vs,centroid:_n};function ps(t,i){if(!i||!t.length)return t.slice();var n=i*i;return t=Pr(t,n),t=br(t,n),t}function gs(t,i,n){return Math.sqrt(Gi(t,i,n,!0))}function wr(t,i,n){return Gi(t,i,n)}function br(t,i){var n=t.length,r=typeof Uint8Array<"u"?Uint8Array:Array,l=new r(n);l[0]=l[n-1]=1,mn(t,l,i,0,n-1);var d,v=[];for(d=0;d<n;d++)l[d]&&v.push(t[d]);return v}function mn(t,i,n,r,l){var d=0,v,g,M;for(g=r+1;g<=l-1;g++)M=Gi(t[g],t[r],t[l],!0),M>d&&(v=g,d=M);d>n&&(i[v]=1,mn(t,i,n,r,v),mn(t,i,n,v,l))}function Pr(t,i){for(var n=[t[0]],r=1,l=0,d=t.length;r<d;r++)Lr(t[r],t[l])>i&&(n.push(t[r]),l=r);return l<d-1&&n.push(t[d-1]),n}var ys;function Ms(t,i,n,r,l){var d=r?ys:oi(t,n),v=oi(i,n),g,M,T;for(ys=v;;){if(!(d|v))return[t,i];if(d&v)return!1;g=d||v,M=ve(t,i,g,n,l),T=oi(M,n),g===d?(t=M,d=T):(i=M,v=T)}}function ve(t,i,n,r,l){var d=i.x-t.x,v=i.y-t.y,g=r.min,M=r.max,T,A;return n&8?(T=t.x+d*(M.y-t.y)/v,A=M.y):n&4?(T=t.x+d*(g.y-t.y)/v,A=g.y):n&2?(T=M.x,A=t.y+v*(M.x-t.x)/d):n&1&&(T=g.x,A=t.y+v*(g.x-t.x)/d),new D(T,A,l)}function oi(t,i){var n=0;return t.x<i.min.x?n|=1:t.x>i.max.x&&(n|=2),t.y<i.min.y?n|=4:t.y>i.max.y&&(n|=8),n}function Lr(t,i){var n=i.x-t.x,r=i.y-t.y;return n*n+r*r}function Gi(t,i,n,r){var l=i.x,d=i.y,v=n.x-l,g=n.y-d,M=v*v+g*g,T;return M>0&&(T=((t.x-l)*v+(t.y-d)*g)/M,T>1?(l=n.x,d=n.y):T>0&&(l+=v*T,d+=g*T)),v=t.x-l,g=t.y-d,r?v*v+g*g:new D(l,d)}function St(t){return!z(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function xs(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),St(t)}function ws(t,i){var n,r,l,d,v,g,M,T;if(!t||t.length===0)throw new Error("latlngs not passed");St(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var A=U([0,0]),k=rt(t),F=k.getNorthWest().distanceTo(k.getSouthWest())*k.getNorthEast().distanceTo(k.getNorthWest());F<1700&&(A=_n(t));var vt=t.length,ft=[];for(n=0;n<vt;n++){var Et=U(t[n]);ft.push(i.project(U([Et.lat-A.lat,Et.lng-A.lng])))}for(n=0,r=0;n<vt-1;n++)r+=ft[n].distanceTo(ft[n+1])/2;if(r===0)T=ft[0];else for(n=0,d=0;n<vt-1;n++)if(v=ft[n],g=ft[n+1],l=v.distanceTo(g),d+=l,d>r){M=(d-r)/l,T=[g.x-M*(g.x-v.x),g.y-M*(g.y-v.y)];break}var wt=i.unproject(Z(T));return U([wt.lat+A.lat,wt.lng+A.lng])}var Tr={__proto__:null,simplify:ps,pointToSegmentDistance:gs,closestPointOnSegment:wr,clipSegment:Ms,_getEdgeIntersection:ve,_getBitCode:oi,_sqClosestPointOnSegment:Gi,isFlat:St,_flat:xs,polylineCenter:ws},vn={project:function(t){return new D(t.lng,t.lat)},unproject:function(t){return new Q(t.y,t.x)},bounds:new tt([-180,-90],[180,90])},pn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new tt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,n=this.R,r=t.lat*i,l=this.R_MINOR/n,d=Math.sqrt(1-l*l),v=d*Math.sin(r),g=Math.tan(Math.PI/4-r/2)/Math.pow((1-v)/(1+v),d/2);return r=-n*Math.log(Math.max(g,1e-10)),new D(t.lng*i*n,r)},unproject:function(t){for(var i=180/Math.PI,n=this.R,r=this.R_MINOR/n,l=Math.sqrt(1-r*r),d=Math.exp(-t.y/n),v=Math.PI/2-2*Math.atan(d),g=0,M=.1,T;g<15&&Math.abs(M)>1e-7;g++)T=l*Math.sin(v),T=Math.pow((1-T)/(1+T),l/2),M=Math.PI/2-2*Math.atan(d*T)-v,v+=M;return new Q(v*i,t.x*i/n)}},Cr={__proto__:null,LonLat:vn,Mercator:pn,SphericalMercator:Fe},Sr=o({},Qt,{code:"EPSG:3395",projection:pn,transformation:function(){var t=.5/(Math.PI*pn.R);return Oi(t,.5,-t,.5)}()}),bs=o({},Qt,{code:"EPSG:4326",projection:vn,transformation:Oi(1/180,1,-1/180,.5)}),Er=o({},Ut,{projection:vn,transformation:Oi(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var n=i.lng-t.lng,r=i.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});Ut.Earth=Qt,Ut.EPSG3395=Sr,Ut.EPSG3857=He,Ut.EPSG900913=ka,Ut.EPSG4326=bs,Ut.Simple=Er;var Nt=Ii.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[_(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[_(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var n=this.getEvents();i.on(n,this),this.once("remove",function(){i.off(n,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});$.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=_(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=_(t);return this._layers[i]?(this._loaded&&t.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return _(t)in this._layers},eachLayer:function(t,i){for(var n in this._layers)t.call(i,this._layers[n]);return this},_addLayers:function(t){t=t?z(t)?t:[t]:[];for(var i=0,n=t.length;i<n;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[_(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=_(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var l=this._zoomBoundLayers[r].options;t=l.minZoom===void 0?t:Math.min(t,l.minZoom),i=l.maxZoom===void 0?i:Math.max(i,l.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var _i=Nt.extend({initialize:function(t,i){w(this,i),this._layers={};var n,r;if(t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),n,r;for(n in this._layers)r=this._layers[n],r[t]&&r[t].apply(r,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var n in this._layers)t.call(i,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return _(t)}}),Ar=function(t,i){return new _i(t,i)},$t=_i.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),_i.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),_i.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new xt;for(var i in this._layers){var n=this._layers[i];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Ir=function(t,i){return new $t(t,i)},mi=Ht.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){w(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var n=this._getIconUrl(t);if(!n){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(r,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),r},_setIconStyles:function(t,i){var n=this.options,r=n[i+"Size"];typeof r=="number"&&(r=[r,r]);var l=Z(r),d=Z(i==="shadow"&&n.shadowAnchor||n.iconAnchor||l&&l.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(n.className||""),d&&(t.style.marginLeft=-d.x+"px",t.style.marginTop=-d.y+"px"),l&&(t.style.width=l.x+"px",t.style.height=l.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return N.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Or(t){return new mi(t)}var Fi=mi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Fi.imagePath!="string"&&(Fi.imagePath=this._detectIconPath()),(this.options.imagePath||Fi.imagePath)+mi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var i=function(n,r,l){var d=r.exec(n);return d&&d[l]};return t=i(t,/^url\((['"])?(.+)\1\)$/,2),t&&i(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=j("div","leaflet-default-icon-path",document.body),i=ki(t,"background-image")||ki(t,"backgroundImage");if(document.body.removeChild(t),i=this._stripUrl(i),i)return i;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),Ps=Zt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Jt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),G(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&st(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,n=i._map,r=this._marker.options.autoPanSpeed,l=this._marker.options.autoPanPadding,d=si(i._icon),v=n.getPixelBounds(),g=n.getPixelOrigin(),M=Mt(v.min._subtract(g).add(l),v.max._subtract(g).subtract(l));if(!M.contains(d)){var T=Z((Math.max(M.max.x,d.x)-M.max.x)/(v.max.x-M.max.x)-(Math.min(M.min.x,d.x)-M.min.x)/(v.min.x-M.min.x),(Math.max(M.max.y,d.y)-M.max.y)/(v.max.y-M.max.y)-(Math.min(M.min.y,d.y)-M.min.y)/(v.min.y-M.min.y)).multiplyBy(r);n.panBy(T,{animate:!1}),this._draggable._newPos._add(T),this._draggable._startPos._add(T),ot(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=nt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(ct(this._panRequest),this._panRequest=nt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,n=i._shadow,r=si(i._icon),l=i._map.layerPointToLatLng(r);n&&ot(n,r),i._latlng=l,t.latlng=l,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){ct(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),pe=Nt.extend({options:{icon:new Fi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){w(this,i),this._latlng=U(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=U(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),n.tagName==="IMG"&&(n.alt=t.alt||"")),G(n,i),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&q(n,"focus",this._panOnFocus,this);var l=t.icon.createShadow(this._shadow),d=!1;l!==this._shadow&&(this._removeShadow(),d=!0),l&&(G(l,i),l.alt=""),this._shadow=l,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),l&&d&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&J(this._icon,"focus",this._panOnFocus,this),it(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&it(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ot(this._icon,t),this._shadow&&ot(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(G(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ps)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ps(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Ct(this._icon,t),this._shadow&&Ct(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var i=this.options.icon.options,n=i.iconSize?Z(i.iconSize):Z(0,0),r=i.iconAnchor?Z(i.iconAnchor):Z(0,0);t.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Nr(t,i){return new pe(t,i)}var Yt=Nt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return w(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ge=Yt.extend({options:{fill:!0,radius:10},initialize:function(t,i){w(this,i),this._latlng=U(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=U(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return Yt.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,n=this._clickTolerance(),r=[t+n,i+n];this._pxBounds=new tt(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function zr(t,i){return new ge(t,i)}var gn=ge.extend({initialize:function(t,i,n){if(typeof i=="number"&&(i=o({},n,{radius:i})),w(this,i),this._latlng=U(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new xt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Yt.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===Qt.distance){var l=Math.PI/180,d=this._mRadius/Qt.R/l,v=n.project([i+d,t]),g=n.project([i-d,t]),M=v.add(g).divideBy(2),T=n.unproject(M).lat,A=Math.acos((Math.cos(d*l)-Math.sin(i*l)*Math.sin(T*l))/(Math.cos(i*l)*Math.cos(T*l)))/l;(isNaN(A)||A===0)&&(A=d/Math.cos(Math.PI/180*i)),this._point=M.subtract(n.getPixelOrigin()),this._radius=isNaN(A)?0:M.x-n.project([T,t-A]).x,this._radiusY=M.y-v.y}else{var k=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(k).x}this._updateBounds()}});function kr(t,i,n){return new gn(t,i,n)}var jt=Yt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){w(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,n=null,r=Gi,l,d,v=0,g=this._parts.length;v<g;v++)for(var M=this._parts[v],T=1,A=M.length;T<A;T++){l=M[T-1],d=M[T];var k=r(t,l,d,!0);k<i&&(i=k,n=r(t,l,d))}return n&&(n.distance=Math.sqrt(i)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ws(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=U(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new xt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return St(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],n=St(t),r=0,l=t.length;r<l;r++)n?(i[r]=U(t[r]),this._bounds.extend(i[r])):i[r]=this._convertLatLngs(t[r]);return i},_project:function(){var t=new tt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new D(t,t);this._rawPxBounds&&(this._pxBounds=new tt([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(t,i,n){var r=t[0]instanceof Q,l=t.length,d,v;if(r){for(v=[],d=0;d<l;d++)v[d]=this._map.latLngToLayerPoint(t[d]),n.extend(v[d]);i.push(v)}else for(d=0;d<l;d++)this._projectLatlngs(t[d],i,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,n,r,l,d,v,g,M;for(n=0,l=0,d=this._rings.length;n<d;n++)for(M=this._rings[n],r=0,v=M.length;r<v-1;r++)g=Ms(M[r],M[r+1],t,r,!0),g&&(i[l]=i[l]||[],i[l].push(g[0]),(g[1]!==M[r+1]||r===v-2)&&(i[l].push(g[1]),l++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=ps(t[n],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var n,r,l,d,v,g,M=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,d=this._parts.length;n<d;n++)for(g=this._parts[n],r=0,v=g.length,l=v-1;r<v;l=r++)if(!(!i&&r===0)&&gs(t,g[l],g[r])<=M)return!0;return!1}});function Rr(t,i){return new jt(t,i)}jt._flat=xs;var vi=jt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var i=jt.prototype._convertLatLngs.call(this,t),n=i.length;return n>=2&&i[0]instanceof Q&&i[0].equals(i[n-1])&&i.pop(),i},_setLatLngs:function(t){jt.prototype._setLatLngs.call(this,t),St(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return St(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,n=new D(i,i);if(t=new tt(t.min.subtract(n),t.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var r=0,l=this._rings.length,d;r<l;r++)d=ms(this._rings[r],t,!0),d.length&&this._parts.push(d)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,n,r,l,d,v,g,M,T;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(d=0,M=this._parts.length;d<M;d++)for(n=this._parts[d],v=0,T=n.length,g=T-1;v<T;g=v++)r=n[v],l=n[g],r.y>t.y!=l.y>t.y&&t.x<(l.x-r.x)*(t.y-r.y)/(l.y-r.y)+r.x&&(i=!i);return i||jt.prototype._containsPoint.call(this,t,!0)}});function Br(t,i){return new vi(t,i)}var Vt=$t.extend({initialize:function(t,i){w(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=z(t)?t:t.features,n,r,l;if(i){for(n=0,r=i.length;n<r;n++)l=i[n],(l.geometries||l.geometry||l.features||l.coordinates)&&this.addData(l);return this}var d=this.options;if(d.filter&&!d.filter(t))return this;var v=ye(t,d);return v?(v.feature=we(t),v.defaultOptions=v.options,this.resetStyle(v),d.onEachFeature&&d.onEachFeature(t,v),this.addLayer(v)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=o({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function ye(t,i){var n=t.type==="Feature"?t.geometry:t,r=n?n.coordinates:null,l=[],d=i&&i.pointToLayer,v=i&&i.coordsToLatLng||yn,g,M,T,A;if(!r&&!n)return null;switch(n.type){case"Point":return g=v(r),Ls(d,t,g,i);case"MultiPoint":for(T=0,A=r.length;T<A;T++)g=v(r[T]),l.push(Ls(d,t,g,i));return new $t(l);case"LineString":case"MultiLineString":return M=Me(r,n.type==="LineString"?0:1,v),new jt(M,i);case"Polygon":case"MultiPolygon":return M=Me(r,n.type==="Polygon"?1:2,v),new vi(M,i);case"GeometryCollection":for(T=0,A=n.geometries.length;T<A;T++){var k=ye({geometry:n.geometries[T],type:"Feature",properties:t.properties},i);k&&l.push(k)}return new $t(l);case"FeatureCollection":for(T=0,A=n.features.length;T<A;T++){var F=ye(n.features[T],i);F&&l.push(F)}return new $t(l);default:throw new Error("Invalid GeoJSON object.")}}function Ls(t,i,n,r){return t?t(i,n):new pe(n,r&&r.markersInheritOptions&&r)}function yn(t){return new Q(t[1],t[0],t[2])}function Me(t,i,n){for(var r=[],l=0,d=t.length,v;l<d;l++)v=i?Me(t[l],i-1,n):(n||yn)(t[l]),r.push(v);return r}function Mn(t,i){return t=U(t),t.alt!==void 0?[x(t.lng,i),x(t.lat,i),x(t.alt,i)]:[x(t.lng,i),x(t.lat,i)]}function xe(t,i,n,r){for(var l=[],d=0,v=t.length;d<v;d++)l.push(i?xe(t[d],St(t[d])?0:i-1,n,r):Mn(t[d],r));return!i&&n&&l.length>0&&l.push(l[0].slice()),l}function pi(t,i){return t.feature?o({},t.feature,{geometry:i}):we(i)}function we(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var xn={toGeoJSON:function(t){return pi(this,{type:"Point",coordinates:Mn(this.getLatLng(),t)})}};pe.include(xn),gn.include(xn),ge.include(xn),jt.include({toGeoJSON:function(t){var i=!St(this._latlngs),n=xe(this._latlngs,i?1:0,!1,t);return pi(this,{type:(i?"Multi":"")+"LineString",coordinates:n})}}),vi.include({toGeoJSON:function(t){var i=!St(this._latlngs),n=i&&!St(this._latlngs[0]),r=xe(this._latlngs,n?2:i?1:0,!0,t);return i||(r=[r]),pi(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),_i.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(n){i.push(n.toGeoJSON(t).geometry.coordinates)}),pi(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var n=i==="GeometryCollection",r=[];return this.eachLayer(function(l){if(l.toGeoJSON){var d=l.toGeoJSON(t);if(n)r.push(d.geometry);else{var v=we(d);v.type==="FeatureCollection"?r.push.apply(r,v.features):r.push(v)}}}),n?pi(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});function Ts(t,i){return new Vt(t,i)}var Zr=Ts,be=Nt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,n){this._url=t,this._bounds=rt(i),w(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(G(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){it(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ci(this._image),this},bringToBack:function(){return this._map&&di(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=rt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:j("img");if(G(i,"leaflet-image-layer"),this._zoomAnimated&&G(i,"leaflet-zoom-animated"),this.options.className&&G(i,this.options.className),i.onselectstart=p,i.onmousemove=p,i.onload=c(this.fire,this,"load"),i.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ni(this._image,n,i)},_reset:function(){var t=this._image,i=new tt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=i.getSize();ot(t,i.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Ct(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Dr=function(t,i,n){return new be(t,i,n)},Cs=be.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:j("video");if(G(i,"leaflet-image-layer"),this._zoomAnimated&&G(i,"leaflet-zoom-animated"),this.options.className&&G(i,this.options.className),i.onselectstart=p,i.onmousemove=p,i.onloadeddata=c(this.fire,this,"load"),t){for(var n=i.getElementsByTagName("source"),r=[],l=0;l<n.length;l++)r.push(n[l].src);this._url=n.length>0?r:[i.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var d=0;d<this._url.length;d++){var v=j("source");v.src=this._url[d],i.appendChild(v)}}});function qr(t,i,n){return new Cs(t,i,n)}var Ss=be.extend({_initImage:function(){var t=this._image=this._url;G(t,"leaflet-image-layer"),this._zoomAnimated&&G(t,"leaflet-zoom-animated"),this.options.className&&G(t,this.options.className),t.onselectstart=p,t.onmousemove=p}});function Gr(t,i,n){return new Ss(t,i,n)}var Dt=Nt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,i){t&&(t instanceof Q||z(t))?(this._latlng=U(t),w(this,i)):(w(this,t),this._source=i),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ct(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ct(this._container,1),this.bringToFront(),this.options.interactive&&(G(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Ct(this._container,0),this._removeTimeout=setTimeout(c(it,void 0,this._container),200)):it(this._container),this.options.interactive&&(st(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=U(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ci(this._container),this},bringToBack:function(){return this._map&&di(this._container),this},_prepareOpen:function(t){var i=this._source;if(!i._map)return!1;if(i instanceof $t){i=null;var n=this._source._layers;for(var r in n)if(n[r]._map){i=n[r];break}if(!i)return!1;this._source=i}if(!t)if(i.getCenter)t=i.getCenter();else if(i.getLatLng)t=i.getLatLng();else if(i.getBounds)t=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=Z(this.options.offset),n=this._getAnchor();this._zoomAnimated?ot(this._container,t.add(n)):i=i.add(t).add(n);var r=this._containerBottom=-i.y,l=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=r+"px",this._container.style.left=l+"px"}},_getAnchor:function(){return[0,0]}});$.include({_initOverlay:function(t,i,n,r){var l=i;return l instanceof t||(l=new t(r).setContent(i)),n&&l.setLatLng(n),l}}),Nt.include({_initOverlay:function(t,i,n,r){var l=n;return l instanceof t?(w(l,r),l._source=this):(l=i&&!r?i:new t(r,this),l.setContent(n)),l}});var Pe=Dt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Dt.prototype.openOn.call(this,t)},onAdd:function(t){Dt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Yt||this._source.on("preclick",ai))},onRemove:function(t){Dt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Yt||this._source.off("preclick",ai))},getEvents:function(){var t=Dt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",i=this._container=j("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=j("div",t+"-content-wrapper",i);if(this._contentNode=j("div",t+"-content",n),Di(i),un(this._contentNode),q(i,"contextmenu",ai),this._tipContainer=j("div",t+"-tip-container",i),this._tip=j("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=j("a",t+"-close-button",i);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',q(r,"click",function(l){dt(l),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),i.width=n+1+"px",i.whiteSpace="",i.height="";var r=t.offsetHeight,l=this.options.maxHeight,d="leaflet-popup-scrolled";l&&r>l?(i.height=l+"px",G(t,d)):st(t,d),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ot(this._container,i.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,i=parseInt(ki(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+i,r=this._containerWidth,l=new D(this._containerLeft,-n-this._containerBottom);l._add(si(this._container));var d=t.layerPointToContainerPoint(l),v=Z(this.options.autoPanPadding),g=Z(this.options.autoPanPaddingTopLeft||v),M=Z(this.options.autoPanPaddingBottomRight||v),T=t.getSize(),A=0,k=0;d.x+r+M.x>T.x&&(A=d.x+r-T.x+M.x),d.x-A-g.x<0&&(A=d.x-g.x),d.y+n+M.y>T.y&&(k=d.y+n-T.y+M.y),d.y-k-g.y<0&&(k=d.y-g.y),(A||k)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([A,k]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Fr=function(t,i){return new Pe(t,i)};$.mergeOptions({closePopupOnClick:!0}),$.include({openPopup:function(t,i,n){return this._initOverlay(Pe,t,i,n).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Nt.include({bindPopup:function(t,i){return this._popup=this._initOverlay(Pe,this._popup,t,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof $t||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){ri(t);var i=t.layer||t.target;if(this._popup._source===i&&!(i instanceof Yt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=i,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Le=Dt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Dt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Dt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Dt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=j("div",i),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+_(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,n,r=this._map,l=this._container,d=r.latLngToContainerPoint(r.getCenter()),v=r.layerPointToContainerPoint(t),g=this.options.direction,M=l.offsetWidth,T=l.offsetHeight,A=Z(this.options.offset),k=this._getAnchor();g==="top"?(i=M/2,n=T):g==="bottom"?(i=M/2,n=0):g==="center"?(i=M/2,n=T/2):g==="right"?(i=0,n=T/2):g==="left"?(i=M,n=T/2):v.x<d.x?(g="right",i=0,n=T/2):(g="left",i=M+(A.x+k.x)*2,n=T/2),t=t.subtract(Z(i,n,!0)).add(A).add(k),st(l,"leaflet-tooltip-right"),st(l,"leaflet-tooltip-left"),st(l,"leaflet-tooltip-top"),st(l,"leaflet-tooltip-bottom"),G(l,"leaflet-tooltip-"+g),ot(l,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ct(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Wr=function(t,i){return new Le(t,i)};$.include({openTooltip:function(t,i,n){return this._initOverlay(Le,t,i,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Nt.include({bindTooltip:function(t,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Le,this._tooltip,t,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[i](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof $t||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&(q(i,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),q(i,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&i.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var i=this;this._map.once("moveend",function(){i._openOnceFlag=!1,i._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var i=t.latlng,n,r;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),r=this._map.containerPointToLayerPoint(n),i=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(i)}});var Es=mi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(fe(i),i.appendChild(n.html)):i.innerHTML=n.html!==!1?n.html:"",n.bgPos){var r=Z(n.bgPos);i.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function Hr(t){return new Es(t)}mi.Default=Fi;var Wi=Nt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:N.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){w(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),it(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ci(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(di(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof D?t:new D(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,n=-t(-1/0,1/0),r=0,l=i.length,d;r<l;r++)d=i[r].style.zIndex,i[r]!==this._container&&d&&(n=t(n,+d));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!N.ielt9){Ct(this._container,this.options.opacity);var t=+new Date,i=!1,n=!1;for(var r in this._tiles){var l=this._tiles[r];if(!(!l.current||!l.loaded)){var d=Math.min(1,(t-l.loaded)/200);Ct(l.el,d),d<1?i=!0:(l.active?n=!0:this._onOpaqueTile(l),l.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),i&&(ct(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=j("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=i-Math.abs(t-n),this._onUpdateLevel(n)):(it(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],l=this._map;return r||(r=this._levels[t]={},r.el=j("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=i,r.origin=l.project(l.unproject(l.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,l.getCenter(),l.getZoom()),p(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var t,i,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var r=i.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)it(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,n,r){var l=Math.floor(t/2),d=Math.floor(i/2),v=n-1,g=new D(+l,+d);g.z=+v;var M=this._tileCoordsToKey(g),T=this._tiles[M];return T&&T.active?(T.retain=!0,!0):(T&&T.loaded&&(T.retain=!0),v>r?this._retainParent(l,d,v,r):!1)},_retainChildren:function(t,i,n,r){for(var l=2*t;l<2*t+2;l++)for(var d=2*i;d<2*i+2;d++){var v=new D(l,d);v.z=n+1;var g=this._tileCoordsToKey(v),M=this._tiles[g];if(M&&M.active){M.retain=!0;continue}else M&&M.loaded&&(M.retain=!0);n+1<r&&this._retainChildren(l,d,n+1,r)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,n,r){var l=Math.round(i);this.options.maxZoom!==void 0&&l>this.options.maxZoom||this.options.minZoom!==void 0&&l<this.options.minZoom?l=void 0:l=this._clampZoom(l);var d=this.options.updateWhenZooming&&l!==this._tileZoom;(!r||d)&&(this._tileZoom=l,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),l!==void 0&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,i)},_setZoomTransform:function(t,i,n){var r=this._map.getZoomScale(n,t.zoom),l=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(i,n)).round();N.any3d?ni(t.el,l,r):ot(t.el,l)},_resetGrid:function(){var t=this._map,i=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,l=this._map.getPixelWorldBounds(this._tileZoom);l&&(this._globalTileRange=this._pxBoundsToTileRange(l)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,i.wrapLng[1]],r).x/n.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([i.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,n=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),r=i.getZoomScale(n,this._tileZoom),l=i.project(t,this._tileZoom).floor(),d=i.getSize().divideBy(r*2);return new tt(l.subtract(d),l.add(d))},_update:function(t){var i=this._map;if(i){var n=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var r=this._getTiledPixelBounds(t),l=this._pxBoundsToTileRange(r),d=l.getCenter(),v=[],g=this.options.keepBuffer,M=new tt(l.getBottomLeft().subtract([g,-g]),l.getTopRight().add([g,-g]));if(!(isFinite(l.min.x)&&isFinite(l.min.y)&&isFinite(l.max.x)&&isFinite(l.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var T in this._tiles){var A=this._tiles[T].coords;(A.z!==this._tileZoom||!M.contains(new D(A.x,A.y)))&&(this._tiles[T].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(t,n);return}for(var k=l.min.y;k<=l.max.y;k++)for(var F=l.min.x;F<=l.max.x;F++){var vt=new D(F,k);if(vt.z=this._tileZoom,!!this._isValidTile(vt)){var ft=this._tiles[this._tileCoordsToKey(vt)];ft?ft.current=!0:v.push(vt)}}if(v.sort(function(wt,yi){return wt.distanceTo(d)-yi.distanceTo(d)}),v.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Et=document.createDocumentFragment();for(F=0;F<v.length;F++)this._addTile(v[F],Et);this._level.el.appendChild(Et)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var n=this._globalTileRange;if(!i.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!i.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return rt(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,n=this.getTileSize(),r=t.scaleBy(n),l=r.add(n),d=i.unproject(r,t.z),v=i.unproject(l,t.z);return[d,v]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),n=new xt(i[0],i[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),n=new D(+i[0],+i[1]);return n.z=+i[2],n},_removeTile:function(t){var i=this._tiles[t];i&&(it(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){G(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=p,t.onmousemove=p,N.ielt9&&this.options.opacity<1&&Ct(t,this.options.opacity)},_addTile:function(t,i){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),l=this.createTile(this._wrapCoords(t),c(this._tileReady,this,t));this._initTile(l),this.createTile.length<2&&nt(c(this._tileReady,this,t,null,l)),ot(l,n),this._tiles[r]={el:l,coords:t,current:!0},i.appendChild(l),this.fire("tileloadstart",{tile:l,coords:t})},_tileReady:function(t,i,n){i&&this.fire("tileerror",{error:i,tile:n,coords:t});var r=this._tileCoordsToKey(t);n=this._tiles[r],n&&(n.loaded=+new Date,this._map._fadeAnimated?(Ct(n.el,0),ct(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),i||(G(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),N.ielt9||!this._map._fadeAnimated?nt(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new D(this._wrapX?y(t.x,this._wrapX):t.x,this._wrapY?y(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new tt(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Ur(t){return new Wi(t)}var gi=Wi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,i){this._url=t,i=w(this,i),i.detectRetina&&N.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var n=document.createElement("img");return q(n,"load",c(this._tileOnLoad,this,i,n)),q(n,"error",c(this._tileOnError,this,i,n)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var i={r:N.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=n),i["-y"]=n}return R(this._url,o(i,this.options))},_tileOnLoad:function(t,i){N.ielt9?setTimeout(c(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,n){var r=this.options.errorTileUrl;r&&i.getAttribute("src")!==r&&(i.src=r),t(n,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset;return n&&(t=i-t),t+r},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=p,i.onerror=p,!i.complete)){i.src=W;var n=this._tiles[t].coords;it(i),delete this._tiles[t],this.fire("tileabort",{tile:i,coords:n})}},_removeTile:function(t){var i=this._tiles[t];if(i)return i.el.setAttribute("src",W),Wi.prototype._removeTile.call(this,t)},_tileReady:function(t,i,n){if(!(!this._map||n&&n.getAttribute("src")===W))return Wi.prototype._tileReady.call(this,t,i,n)}});function As(t,i){return new gi(t,i)}var Is=gi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var n=o({},this.defaultWmsParams);for(var r in i)r in this.options||(n[r]=i[r]);i=w(this,i);var l=i.detectRetina&&N.retina?2:1,d=this.getTileSize();n.width=d.x*l,n.height=d.y*l,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,gi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),n=this._crs,r=Mt(n.project(i[0]),n.project(i[1])),l=r.min,d=r.max,v=(this._wmsVersion>=1.3&&this._crs===bs?[l.y,l.x,d.y,d.x]:[l.x,l.y,d.x,d.y]).join(","),g=gi.prototype.getTileUrl.call(this,t);return g+S(this.wmsParams,g,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+v},setParams:function(t,i){return o(this.wmsParams,t),i||this.redraw(),this}});function $r(t,i){return new Is(t,i)}gi.WMS=Is,As.wms=$r;var Kt=Nt.extend({options:{padding:.1},initialize:function(t){w(this,t),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),G(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var n=this._map.getZoomScale(i,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),l=this._map.project(this._center,i),d=r.multiplyBy(-n).add(l).subtract(this._map._getNewPixelOrigin(t,i));N.any3d?ni(this._container,d,n):ot(this._container,d)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),n=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new tt(n,n.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Os=Kt.extend({options:{tolerance:0},getEvents:function(){var t=Kt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Kt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");q(t,"mousemove",this._onMouseMove,this),q(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),q(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){ct(this._redrawRequest),delete this._ctx,it(this._container),J(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kt.prototype._update.call(this);var t=this._bounds,i=this._container,n=t.getSize(),r=N.retina?2:1;ot(i,t.min),i.width=r*n.x,i.height=r*n.y,i.style.width=n.x+"px",i.style.height=n.y+"px",N.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Kt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[_(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,n=i.next,r=i.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[_(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),n=[],r,l;for(l=0;l<i.length;l++){if(r=Number(i[l]),isNaN(r))return;n.push(r)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||nt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new tt,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var n=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(this._drawing){var n,r,l,d,v=t._parts,g=v.length,M=this._ctx;if(g){for(M.beginPath(),n=0;n<g;n++){for(r=0,l=v[n].length;r<l;r++)d=v[n][r],M[r?"lineTo":"moveTo"](d.x,d.y);i&&M.closePath()}this._fillStroke(M,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),l=(Math.max(Math.round(t._radiusY),1)||r)/r;l!==1&&(n.save(),n.scale(1,l)),n.beginPath(),n.arc(i.x,i.y/l,r,0,Math.PI*2,!1),l!==1&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,i){var n=i.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),n,r,l=this._drawFirst;l;l=l.next)n=l.layer,n.options.interactive&&n._containsPoint(i)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(n))&&(r=n);this._fireEvent(r?[r]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(st(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var n,r,l=this._drawFirst;l;l=l.next)n=l.layer,n.options.interactive&&n._containsPoint(i)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(G(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,n){this._map._fireDOMEvent(i,n||i.type,t)},_bringToFront:function(t){var i=t._order;if(i){var n=i.next,r=i.prev;if(n)n.prev=r;else return;r?r.next=n:n&&(this._drawFirst=n),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(i){var n=i.next,r=i.prev;if(r)r.next=n;else return;n?n.prev=r:r&&(this._drawLast=r),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function Ns(t){return N.canvas?new Os(t):null}var Hi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),jr={_initContainer:function(){this._container=j("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Kt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=Hi("shape");G(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=Hi("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;it(i),t.removeInteractiveTarget(i),delete this._layers[_(t)]},_updateStyle:function(t){var i=t._stroke,n=t._fill,r=t.options,l=t._container;l.stroked=!!r.stroke,l.filled=!!r.fill,r.stroke?(i||(i=t._stroke=Hi("stroke")),l.appendChild(i),i.weight=r.weight+"px",i.color=r.color,i.opacity=r.opacity,r.dashArray?i.dashStyle=z(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=r.lineCap.replace("butt","flat"),i.joinstyle=r.lineJoin):i&&(l.removeChild(i),t._stroke=null),r.fill?(n||(n=t._fill=Hi("fill")),l.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(l.removeChild(n),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+n+","+r+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){ci(t._container)},_bringToBack:function(t){di(t._container)}},Te=N.vml?Hi:Bn,Ui=Kt.extend({_initContainer:function(){this._container=Te("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Te("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){it(this._container),J(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kt.prototype._update.call(this);var t=this._bounds,i=t.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,n.setAttribute("width",i.x),n.setAttribute("height",i.y)),ot(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=Te("path");t.options.className&&G(i,t.options.className),t.options.interactive&&G(i,"leaflet-interactive"),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){it(t._path),t.removeInteractiveTarget(t._path),delete this._layers[_(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,n=t.options;i&&(n.stroke?(i.setAttribute("stroke",n.color),i.setAttribute("stroke-opacity",n.opacity),i.setAttribute("stroke-width",n.weight),i.setAttribute("stroke-linecap",n.lineCap),i.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?i.setAttribute("stroke-dasharray",n.dashArray):i.removeAttribute("stroke-dasharray"),n.dashOffset?i.setAttribute("stroke-dashoffset",n.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),n.fill?(i.setAttribute("fill",n.fillColor||n.color),i.setAttribute("fill-opacity",n.fillOpacity),i.setAttribute("fill-rule",n.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,Zn(t._parts,i))},_updateCircle:function(t){var i=t._point,n=Math.max(Math.round(t._radius),1),r=Math.max(Math.round(t._radiusY),1)||n,l="a"+n+","+r+" 0 1,0 ",d=t._empty()?"M0 0":"M"+(i.x-n)+","+i.y+l+n*2+",0 "+l+-n*2+",0 ";this._setPath(t,d)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){ci(t._path)},_bringToBack:function(t){di(t._path)}});N.vml&&Ui.include(jr);function zs(t){return N.svg||N.vml?new Ui(t):null}$.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&Ns(t)||zs(t)}});var ks=vi.extend({initialize:function(t,i){vi.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=rt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Vr(t,i){return new ks(t,i)}Ui.create=Te,Ui.pointsToPath=Zn,Vt.geometryToLayer=ye,Vt.coordsToLatLng=yn,Vt.coordsToLatLngs=Me,Vt.latLngToCoords=Mn,Vt.latLngsToCoords=xe,Vt.getFeature=pi,Vt.asFeature=we,$.mergeOptions({boxZoom:!0});var Rs=Zt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){q(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){J(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){it(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ri(),en(),this._startPoint=this._map.mouseEventToContainerPoint(t),q(document,{contextmenu:ri,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=j("div","leaflet-zoom-box",this._container),G(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new tt(this._point,this._startPoint),n=i.getSize();ot(this._box,i.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(it(this._box),st(this._container,"leaflet-crosshair")),Bi(),nn(),J(document,{contextmenu:ri,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var i=new xt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});$.addInitHook("addHandler","boxZoom",Rs),$.mergeOptions({doubleClickZoom:!0});var Bs=Zt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,n=i.getZoom(),r=i.options.zoomDelta,l=t.originalEvent.shiftKey?n-r:n+r;i.options.doubleClickZoom==="center"?i.setZoom(l):i.setZoomAround(t.containerPoint,l)}});$.addInitHook("addHandler","doubleClickZoom",Bs),$.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zs=Zt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Jt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}G(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){st(this._map._container,"leaflet-grab"),st(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=rt(this._map.options.maxBounds);this._offsetLimit=Mt(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,l=(r-i+n)%t+i-n,d=(r+i+n)%t-i-n,v=Math.abs(l+n)<Math.abs(d+n)?l:d;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=v},_onDragEnd:function(t){var i=this._map,n=i.options,r=!n.inertia||t.noInertia||this._times.length<2;if(i.fire("dragend",t),r)i.fire("moveend");else{this._prunePositions(+new Date);var l=this._lastPos.subtract(this._positions[0]),d=(this._lastTime-this._times[0])/1e3,v=n.easeLinearity,g=l.multiplyBy(v/d),M=g.distanceTo([0,0]),T=Math.min(n.inertiaMaxSpeed,M),A=g.multiplyBy(T/M),k=T/(n.inertiaDeceleration*v),F=A.multiplyBy(-k/2).round();!F.x&&!F.y?i.fire("moveend"):(F=i._limitOffset(F,i.options.maxBounds),nt(function(){i.panBy(F,{duration:k,easeLinearity:v,noMoveStart:!0,animate:!0})}))}}});$.addInitHook("addHandler","dragging",Zs),$.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ds=Zt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),q(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),J(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,n=t.scrollTop||i.scrollTop,r=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},n=this.keyCodes,r,l;for(r=0,l=n.left.length;r<l;r++)i[n.left[r]]=[-1*t,0];for(r=0,l=n.right.length;r<l;r++)i[n.right[r]]=[t,0];for(r=0,l=n.down.length;r<l;r++)i[n.down[r]]=[0,t];for(r=0,l=n.up.length;r<l;r++)i[n.up[r]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},n=this.keyCodes,r,l;for(r=0,l=n.zoomIn.length;r<l;r++)i[n.zoomIn[r]]=t;for(r=0,l=n.zoomOut.length;r<l;r++)i[n.zoomOut[r]]=-t},_addHooks:function(){q(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){J(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,n=this._map,r;if(i in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(r=this._panKeys[i],t.shiftKey&&(r=Z(r).multiplyBy(3)),n.options.maxBounds&&(r=n._limitOffset(Z(r),n.options.maxBounds)),n.options.worldCopyJump){var l=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(r)));n.panTo(l)}else n.panBy(r)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;ri(t)}}});$.addInitHook("addHandler","keyboard",Ds),$.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var qs=Zt.extend({addHooks:function(){q(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){J(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=us(t),n=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),r),ri(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(this._map.options.wheelPxPerZoomLevel*4),l=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,d=n?Math.ceil(l/n)*n:l,v=t._limitZoom(i+(this._delta>0?d:-d))-i;this._delta=0,this._startTime=null,v&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+v):t.setZoomAround(this._lastMousePos,i+v))}});$.addInitHook("addHandler","scrollWheelZoom",qs);var Kr=600;$.mergeOptions({tapHold:N.touchNative&&N.safari&&N.mobile,tapTolerance:15});var Gs=Zt.extend({addHooks:function(){q(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){J(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var i=t.touches[0];this._startPos=this._newPos=new D(i.clientX,i.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(q(document,"touchend",dt),q(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),Kr),q(document,"touchend touchcancel contextmenu",this._cancel,this),q(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){J(document,"touchend",dt),J(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),J(document,"touchend touchcancel contextmenu",this._cancel,this),J(document,"touchmove",this._onMove,this)},_onMove:function(t){var i=t.touches[0];this._newPos=new D(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,i){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});n._simulated=!0,i.target.dispatchEvent(n)}});$.addInitHook("addHandler","tapHold",Gs),$.mergeOptions({touchZoom:N.touch,bounceAtZoomLimits:!0});var Fs=Zt.extend({addHooks:function(){G(this._map._container,"leaflet-touch-zoom"),q(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){st(this._map._container,"leaflet-touch-zoom"),J(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var n=i.mouseEventToContainerPoint(t.touches[0]),r=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),q(document,"touchmove",this._onTouchMove,this),q(document,"touchend touchcancel",this._onTouchEnd,this),dt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,n=i.mouseEventToContainerPoint(t.touches[0]),r=i.mouseEventToContainerPoint(t.touches[1]),l=n.distanceTo(r)/this._startDist;if(this._zoom=i.getScaleZoom(l,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&l<1||this._zoom>i.getMaxZoom()&&l>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,l===1)return}else{var d=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(l===1&&d.x===0&&d.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(d),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),ct(this._animRequest);var v=c(i._move,i,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=nt(v,this,!0),dt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ct(this._animRequest),J(document,"touchmove",this._onTouchMove,this),J(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});$.addInitHook("addHandler","touchZoom",Fs),$.BoxZoom=Rs,$.DoubleClickZoom=Bs,$.Drag=Zs,$.Keyboard=Ds,$.ScrollWheelZoom=qs,$.TapHold=Gs,$.TouchZoom=Fs,a.Bounds=tt,a.Browser=N,a.CRS=Ut,a.Canvas=Os,a.Circle=gn,a.CircleMarker=ge,a.Class=Ht,a.Control=Ot,a.DivIcon=Es,a.DivOverlay=Dt,a.DomEvent=dr,a.DomUtil=fr,a.Draggable=Jt,a.Evented=Ii,a.FeatureGroup=$t,a.GeoJSON=Vt,a.GridLayer=Wi,a.Handler=Zt,a.Icon=mi,a.ImageOverlay=be,a.LatLng=Q,a.LatLngBounds=xt,a.Layer=Nt,a.LayerGroup=_i,a.LineUtil=Tr,a.Map=$,a.Marker=pe,a.Mixin=Mr,a.Path=Yt,a.Point=D,a.PolyUtil=xr,a.Polygon=vi,a.Polyline=jt,a.Popup=Pe,a.PosAnimation=fs,a.Projection=Cr,a.Rectangle=ks,a.Renderer=Kt,a.SVG=Ui,a.SVGOverlay=Ss,a.TileLayer=gi,a.Tooltip=Le,a.Transformation=We,a.Util=Ge,a.VideoOverlay=Cs,a.bind=c,a.bounds=Mt,a.canvas=Ns,a.circle=kr,a.circleMarker=zr,a.control=qi,a.divIcon=Hr,a.extend=o,a.featureGroup=Ir,a.geoJSON=Ts,a.geoJson=Zr,a.gridLayer=Ur,a.icon=Or,a.imageOverlay=Dr,a.latLng=U,a.latLngBounds=rt,a.layerGroup=Ar,a.map=_r,a.marker=Nr,a.point=Z,a.polygon=Br,a.polyline=Rr,a.popup=Fr,a.rectangle=Vr,a.setOptions=w,a.stamp=_,a.svg=zs,a.svgOverlay=Gr,a.tileLayer=As,a.tooltip=Wr,a.transformation=Oi,a.version=h,a.videoOverlay=qr;var Xr=window.L;a.noConflict=function(){return window.L=Xr,this},window.L=a})})(Ln,Ln.exports);var oo=Ln.exports;const Mi=ro(oo);function ho(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var li=1,ui=2,Ti=3,lo=4,Tn=5,$s=6378137,uo=6356752314e-3,js=.0066943799901413165,Xi=484813681109536e-20,C=Math.PI/2,fo=.16666666666666666,co=.04722222222222222,_o=.022156084656084655,E=1e-10,_t=.017453292519943295,Gt=57.29577951308232,K=Math.PI/4,ie=Math.PI*2,at=3.14159265359,Pt={};Pt.greenwich=0;Pt.lisbon=-9.131906111111;Pt.paris=2.337229166667;Pt.bogota=-74.080916666667;Pt.madrid=-3.687938888889;Pt.rome=12.452333333333;Pt.bern=7.439583333333;Pt.jakarta=106.807719444444;Pt.ferro=-17.666666666667;Pt.brussels=4.367975;Pt.stockholm=18.058277777778;Pt.athens=23.7163375;Pt.oslo=10.722916666667;const mo={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var Vs=/[\s_\-\/\(\)]/g;function ii(e,s){if(e[s])return e[s];for(var a=Object.keys(e),h=s.toLowerCase().replace(Vs,""),o=-1,u,c;++o<a.length;)if(u=a[o],c=u.toLowerCase().replace(Vs,""),c===h)return e[u]}function Cn(e){var s={},a=e.split("+").map(function(f){return f.trim()}).filter(function(f){return f}).reduce(function(f,_){var m=_.split("=");return m.push(!0),f[m[0].toLowerCase()]=m[1],f},{}),h,o,u,c={proj:"projName",datum:"datumCode",rf:function(f){s.rf=parseFloat(f)},lat_0:function(f){s.lat0=f*_t},lat_1:function(f){s.lat1=f*_t},lat_2:function(f){s.lat2=f*_t},lat_ts:function(f){s.lat_ts=f*_t},lon_0:function(f){s.long0=f*_t},lon_1:function(f){s.long1=f*_t},lon_2:function(f){s.long2=f*_t},alpha:function(f){s.alpha=parseFloat(f)*_t},gamma:function(f){s.rectified_grid_angle=parseFloat(f)},lonc:function(f){s.longc=f*_t},x_0:function(f){s.x0=parseFloat(f)},y_0:function(f){s.y0=parseFloat(f)},k_0:function(f){s.k0=parseFloat(f)},k:function(f){s.k0=parseFloat(f)},a:function(f){s.a=parseFloat(f)},b:function(f){s.b=parseFloat(f)},r:function(f){s.a=s.b=parseFloat(f)},r_a:function(){s.R_A=!0},zone:function(f){s.zone=parseInt(f,10)},south:function(){s.utmSouth=!0},towgs84:function(f){s.datum_params=f.split(",").map(function(_){return parseFloat(_)})},to_meter:function(f){s.to_meter=parseFloat(f)},units:function(f){s.units=f;var _=ii(mo,f);_&&(s.to_meter=_.to_meter)},from_greenwich:function(f){s.from_greenwich=f*_t},pm:function(f){var _=ii(Pt,f);s.from_greenwich=(_||parseFloat(f))*_t},nadgrids:function(f){f==="@null"?s.datumCode="none":s.nadgrids=f},axis:function(f){var _="ewnsud";f.length===3&&_.indexOf(f.substr(0,1))!==-1&&_.indexOf(f.substr(1,1))!==-1&&_.indexOf(f.substr(2,1))!==-1&&(s.axis=f)},approx:function(){s.approx=!0}};for(h in a)o=a[h],h in c?(u=c[h],typeof u=="function"?u(o):s[u]=o):s[h]=o;return typeof s.datumCode=="string"&&s.datumCode!=="WGS84"&&(s.datumCode=s.datumCode.toLowerCase()),s}var ee=1,fa=2,ca=3,Ne=4,da=5,An=-1,vo=/\s/,po=/[A-Za-z]/,go=/[A-Za-z84_]/,De=/[,\]]/,_a=/[\d\.E\-\+]/;function Xt(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ee}Xt.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Ne)for(;vo.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case ee:return this.neutral(e);case fa:return this.keyword(e);case Ne:return this.quoted(e);case da:return this.afterquote(e);case ca:return this.number(e);case An:return}};Xt.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Ne;return}if(De.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Xt.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=ee;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=ee,this.currentObject=this.stack.pop(),this.currentObject||(this.state=An);return}};Xt.prototype.number=function(e){if(_a.test(e)){this.word+=e;return}if(De.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Xt.prototype.quoted=function(e){if(e==='"'){this.state=da;return}this.word+=e};Xt.prototype.keyword=function(e){if(go.test(e)){this.word+=e;return}if(e==="["){var s=[];s.push(this.word),this.level++,this.root===null?this.root=s:this.currentObject.push(s),this.stack.push(this.currentObject),this.currentObject=s,this.state=ee;return}if(De.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Xt.prototype.neutral=function(e){if(po.test(e)){this.word=e,this.state=fa;return}if(e==='"'){this.word="",this.state=Ne;return}if(_a.test(e)){this.word=e,this.state=ca;return}if(De.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Xt.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===An)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function yo(e){var s=new Xt(e);return s.output()}function Ks(e,s,a){Array.isArray(s)&&(a.unshift(s),s=null);var h=s?{}:e,o=a.reduce(function(u,c){return wi(c,u),u},h);s&&(e[s]=o)}function wi(e,s){if(!Array.isArray(e)){s[e]=!0;return}var a=e.shift();if(a==="PARAMETER"&&(a=e.shift()),e.length===1){if(Array.isArray(e[0])){s[a]={},wi(e[0],s[a]);return}s[a]=e[0];return}if(!e.length){s[a]=!0;return}if(a==="TOWGS84"){s[a]=e;return}if(a==="AXIS"){a in s||(s[a]=[]),s[a].push(e);return}Array.isArray(a)||(s[a]={});var h;switch(a){case"UNIT":case"PRIMEM":case"VERT_DATUM":s[a]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&wi(e[2],s[a]);return;case"SPHEROID":case"ELLIPSOID":s[a]={name:e[0],a:e[1],rf:e[2]},e.length===4&&wi(e[3],s[a]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],Ks(s,a,e);return;default:for(h=-1;++h<e.length;)if(!Array.isArray(e[h]))return wi(e,s[a]);return Ks(s,a,e)}}var Mo=.017453292519943295;function xo(e,s){var a=s[0],h=s[1];!(a in e)&&h in e&&(e[a]=e[h],s.length===3&&(e[a]=s[2](e[a])))}function qt(e){return e*Mo}function wo(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var s="",a=0,h=e.AXIS.length;a<h;++a){var o=[e.AXIS[a][0].toLowerCase(),e.AXIS[a][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?s+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?s+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?s+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="west")&&(s+="w")}s.length===2&&(s+="u"),s.length===3&&(e.axis=s)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var u=e.GEOGCS;e.type==="GEOGCS"&&(u=e),u&&(u.DATUM?e.datumCode=u.DATUM.name.toLowerCase():e.datumCode=u.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),u.DATUM&&u.DATUM.SPHEROID&&(e.ellps=u.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=u.DATUM.SPHEROID.a,e.rf=parseFloat(u.DATUM.SPHEROID.rf,10)),u.DATUM&&u.DATUM.TOWGS84&&(e.datum_params=u.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function c(m){var y=e.to_meter||1;return m*y}var f=function(m){return xo(e,m)},_=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",qt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",qt],["x0","false_easting",c],["y0","false_northing",c],["long0","central_meridian",qt],["lat0","latitude_of_origin",qt],["lat0","standard_parallel_1",qt],["lat1","standard_parallel_1",qt],["lat2","standard_parallel_2",qt],["azimuth","Azimuth"],["alpha","azimuth",qt],["srsCode","name"]];_.forEach(f),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=qt(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=qt(e.lat0>0?90:-90))}function ma(e){var s=yo(e),a=s.shift(),h=s.shift();s.unshift(["name",h]),s.unshift(["type",a]);var o={};return wi(s,o),wo(o),o}function pt(e){var s=this;if(arguments.length===2){var a=arguments[1];typeof a=="string"?a.charAt(0)==="+"?pt[e]=Cn(arguments[1]):pt[e]=ma(arguments[1]):pt[e]=a}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(h){Array.isArray(h)?pt.apply(s,h):pt(h)});if(typeof e=="string"){if(e in pt)return pt[e]}else"EPSG"in e?pt["EPSG:"+e.EPSG]=e:"ESRI"in e?pt["ESRI:"+e.ESRI]=e:"IAU2000"in e?pt["IAU2000:"+e.IAU2000]=e:console.log(e);return}}ho(pt);function bo(e){return typeof e=="string"}function Po(e){return e in pt}var Lo=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function To(e){return Lo.some(function(s){return e.indexOf(s)>-1})}var Co=["3857","900913","3785","102113"];function So(e){var s=ii(e,"authority");if(s){var a=ii(s,"epsg");return a&&Co.indexOf(a)>-1}}function Eo(e){var s=ii(e,"extension");if(s)return ii(s,"proj4")}function Ao(e){return e[0]==="+"}function Io(e){if(bo(e)){if(Po(e))return pt[e];if(To(e)){var s=ma(e);if(So(s))return pt["EPSG:3857"];var a=Eo(s);return a?Cn(a):s}if(Ao(e))return Cn(e)}else return e}function Xs(e,s){e=e||{};var a,h;if(!s)return e;for(h in s)a=s[h],a!==void 0&&(e[h]=a);return e}function Wt(e,s,a){var h=e*s;return a/Math.sqrt(1-h*h)}function se(e){return e<0?-1:1}function I(e){return Math.abs(e)<=at?e:e-se(e)*ie}function zt(e,s,a){var h=e*a,o=.5*e;return h=Math.pow((1-h)/(1+h),o),Math.tan(.5*(C-s))/h}function ne(e,s){for(var a=.5*e,h,o,u=C-2*Math.atan(s),c=0;c<=15;c++)if(h=e*Math.sin(u),o=C-2*Math.atan(s*Math.pow((1-h)/(1+h),a))-u,u+=o,Math.abs(o)<=1e-10)return u;return-9999}function Oo(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Wt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function No(e){var s=e.x,a=e.y;if(a*Gt>90&&a*Gt<-90&&s*Gt>180&&s*Gt<-180)return null;var h,o;if(Math.abs(Math.abs(a)-C)<=E)return null;if(this.sphere)h=this.x0+this.a*this.k0*I(s-this.long0),o=this.y0+this.a*this.k0*Math.log(Math.tan(K+.5*a));else{var u=Math.sin(a),c=zt(this.e,a,u);h=this.x0+this.a*this.k0*I(s-this.long0),o=this.y0-this.a*this.k0*Math.log(c)}return e.x=h,e.y=o,e}function zo(e){var s=e.x-this.x0,a=e.y-this.y0,h,o;if(this.sphere)o=C-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var u=Math.exp(-a/(this.a*this.k0));if(o=ne(this.e,u),o===-9999)return null}return h=I(this.long0+s/(this.a*this.k0)),e.x=h,e.y=o,e}var ko=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Ro={init:Oo,forward:No,inverse:zo,names:ko};function Bo(){}function Qs(e){return e}var Zo=["longlat","identity"];const Do={init:Bo,forward:Qs,inverse:Qs,names:Zo};var qo=[Ro,Do],Ae={},ze=[];function va(e,s){var a=ze.length;return e.names?(ze[a]=e,e.names.forEach(function(h){Ae[h.toLowerCase()]=a}),this):(console.log(s),!0)}function Go(e){if(!e)return!1;var s=e.toLowerCase();if(typeof Ae[s]<"u"&&ze[Ae[s]])return ze[Ae[s]]}function Fo(){qo.forEach(va)}const Wo={start:Fo,add:va,get:Go};var B={};B.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};B.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};B.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};B.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};B.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};B.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};B.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};B.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};B.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};B.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};B.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};B.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};B.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};B.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};B.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};B.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};B.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};B.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};B.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};B.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};B.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};B.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};B.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};B.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};B.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};B.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};B.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};B.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};B.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};B.hough={a:6378270,rf:297,ellipseName:"Hough"};B.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};B.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};B.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};B.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};B.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};B.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};B.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};B.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};B.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};B.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};B.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};B.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Ho=B.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};B.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Uo(e,s,a,h){var o=e*e,u=s*s,c=(o-u)/o,f=0;h?(e*=1-c*(fo+c*(co+c*_o)),o=e*e,c=0):f=Math.sqrt(c);var _=(o-u)/u;return{es:c,e:f,ep2:_}}function $o(e,s,a,h,o){if(!e){var u=ii(B,h);u||(u=Ho),e=u.a,s=u.b,a=u.rf}return a&&!s&&(s=(1-1/a)*e),(a===0||Math.abs(e-s)<E)&&(o=!0,s=e),{a:e,b:s,rf:a,sphere:o}}var ut={};ut.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};ut.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};ut.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};ut.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};ut.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};ut.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};ut.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};ut.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};ut.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};ut.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};ut.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};ut.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};ut.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};ut.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};ut.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};ut.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};ut.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};ut.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function jo(e,s,a,h,o,u,c){var f={};return e===void 0||e==="none"?f.datum_type=Tn:f.datum_type=lo,s&&(f.datum_params=s.map(parseFloat),(f.datum_params[0]!==0||f.datum_params[1]!==0||f.datum_params[2]!==0)&&(f.datum_type=li),f.datum_params.length>3&&(f.datum_params[3]!==0||f.datum_params[4]!==0||f.datum_params[5]!==0||f.datum_params[6]!==0)&&(f.datum_type=ui,f.datum_params[3]*=Xi,f.datum_params[4]*=Xi,f.datum_params[5]*=Xi,f.datum_params[6]=f.datum_params[6]/1e6+1)),c&&(f.datum_type=Ti,f.grids=c),f.a=a,f.b=h,f.es=o,f.ep2=u,f}var pa={};function Vo(e,s){var a=new DataView(s),h=Qo(a),o=Jo(a,h),u=Yo(a,o,h),c={header:o,subgrids:u};return pa[e]=c,c}function Ko(e){if(e===void 0)return null;var s=e.split(",");return s.map(Xo)}function Xo(e){if(e.length===0)return null;var s=e[0]==="@";return s&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!s,grid:null,isNull:!0}:{name:e,mandatory:!s,grid:pa[e]||null,isNull:!1}}function bi(e){return e/3600*Math.PI/180}function Qo(e){var s=e.getInt32(8,!1);return s===11?!1:(s=e.getInt32(8,!0),s!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Jo(e,s){return{nFields:e.getInt32(8,s),nSubgridFields:e.getInt32(24,s),nSubgrids:e.getInt32(40,s),shiftType:Sn(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,s),fromSemiMinorAxis:e.getFloat64(136,s),toSemiMajorAxis:e.getFloat64(152,s),toSemiMinorAxis:e.getFloat64(168,s)}}function Sn(e,s,a){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(s,a)))}function Yo(e,s,a){for(var h=176,o=[],u=0;u<s.nSubgrids;u++){var c=ih(e,h,a),f=eh(e,h,c,a),_=Math.round(1+(c.upperLongitude-c.lowerLongitude)/c.longitudeInterval),m=Math.round(1+(c.upperLatitude-c.lowerLatitude)/c.latitudeInterval);o.push({ll:[bi(c.lowerLongitude),bi(c.lowerLatitude)],del:[bi(c.longitudeInterval),bi(c.latitudeInterval)],lim:[_,m],count:c.gridNodeCount,cvs:th(f)}),h+=176+c.gridNodeCount*16}return o}function th(e){return e.map(function(s){return[bi(s.longitudeShift),bi(s.latitudeShift)]})}function ih(e,s,a){return{name:Sn(e,s+8,s+16).trim(),parent:Sn(e,s+24,s+24+8).trim(),lowerLatitude:e.getFloat64(s+72,a),upperLatitude:e.getFloat64(s+88,a),lowerLongitude:e.getFloat64(s+104,a),upperLongitude:e.getFloat64(s+120,a),latitudeInterval:e.getFloat64(s+136,a),longitudeInterval:e.getFloat64(s+152,a),gridNodeCount:e.getInt32(s+168,a)}}function eh(e,s,a,h){for(var o=s+176,u=16,c=[],f=0;f<a.gridNodeCount;f++){var _={latitudeShift:e.getFloat32(o+f*u,h),longitudeShift:e.getFloat32(o+f*u+4,h),latitudeAccuracy:e.getFloat32(o+f*u+8,h),longitudeAccuracy:e.getFloat32(o+f*u+12,h)};c.push(_)}return c}function Ft(e,s){if(!(this instanceof Ft))return new Ft(e);s=s||function(m){if(m)throw m};var a=Io(e);if(typeof a!="object"){s(e);return}var h=Ft.projections.get(a.projName);if(!h){s(e);return}if(a.datumCode&&a.datumCode!=="none"){var o=ii(ut,a.datumCode);o&&(a.datum_params=a.datum_params||(o.towgs84?o.towgs84.split(","):null),a.ellps=o.ellipse,a.datumName=o.datumName?o.datumName:a.datumCode)}a.k0=a.k0||1,a.axis=a.axis||"enu",a.ellps=a.ellps||"wgs84",a.lat1=a.lat1||a.lat0;var u=$o(a.a,a.b,a.rf,a.ellps,a.sphere),c=Uo(u.a,u.b,u.rf,a.R_A),f=Ko(a.nadgrids),_=a.datum||jo(a.datumCode,a.datum_params,u.a,u.b,c.es,c.ep2,f);Xs(this,a),Xs(this,h),this.a=u.a,this.b=u.b,this.rf=u.rf,this.sphere=u.sphere,this.es=c.es,this.e=c.e,this.ep2=c.ep2,this.datum=_,this.init(),s(null,this)}Ft.projections=Wo;Ft.projections.start();function nh(e,s){return e.datum_type!==s.datum_type||e.a!==s.a||Math.abs(e.es-s.es)>5e-11?!1:e.datum_type===li?e.datum_params[0]===s.datum_params[0]&&e.datum_params[1]===s.datum_params[1]&&e.datum_params[2]===s.datum_params[2]:e.datum_type===ui?e.datum_params[0]===s.datum_params[0]&&e.datum_params[1]===s.datum_params[1]&&e.datum_params[2]===s.datum_params[2]&&e.datum_params[3]===s.datum_params[3]&&e.datum_params[4]===s.datum_params[4]&&e.datum_params[5]===s.datum_params[5]&&e.datum_params[6]===s.datum_params[6]:!0}function ga(e,s,a){var h=e.x,o=e.y,u=e.z?e.z:0,c,f,_,m;if(o<-C&&o>-1.001*C)o=-C;else if(o>C&&o<1.001*C)o=C;else{if(o<-C)return{x:-1/0,y:-1/0,z:e.z};if(o>C)return{x:1/0,y:1/0,z:e.z}}return h>Math.PI&&(h-=2*Math.PI),f=Math.sin(o),m=Math.cos(o),_=f*f,c=a/Math.sqrt(1-s*_),{x:(c+u)*m*Math.cos(h),y:(c+u)*m*Math.sin(h),z:(c*(1-s)+u)*f}}function ya(e,s,a,h){var o=1e-12,u=o*o,c=30,f,_,m,y,p,x,P,b,w,S,O,R,z,V=e.x,W=e.y,H=e.z?e.z:0,lt,Y,yt;if(f=Math.sqrt(V*V+W*W),_=Math.sqrt(V*V+W*W+H*H),f/a<o){if(lt=0,_/a<o)return Y=C,yt=-h,{x:e.x,y:e.y,z:e.z}}else lt=Math.atan2(W,V);m=H/_,y=f/_,p=1/Math.sqrt(1-s*(2-s)*y*y),b=y*(1-s)*p,w=m*p,z=0;do z++,P=a/Math.sqrt(1-s*w*w),yt=f*b+H*w-P*(1-s*w*w),x=s*P/(P+yt),p=1/Math.sqrt(1-x*(2-x)*y*y),S=y*(1-x)*p,O=m*p,R=O*b-S*w,b=S,w=O;while(R*R>u&&z<c);return Y=Math.atan(O/Math.abs(S)),{x:lt,y:Y,z:yt}}function sh(e,s,a){if(s===li)return{x:e.x+a[0],y:e.y+a[1],z:e.z+a[2]};if(s===ui){var h=a[0],o=a[1],u=a[2],c=a[3],f=a[4],_=a[5],m=a[6];return{x:m*(e.x-_*e.y+f*e.z)+h,y:m*(_*e.x+e.y-c*e.z)+o,z:m*(-f*e.x+c*e.y+e.z)+u}}}function ah(e,s,a){if(s===li)return{x:e.x-a[0],y:e.y-a[1],z:e.z-a[2]};if(s===ui){var h=a[0],o=a[1],u=a[2],c=a[3],f=a[4],_=a[5],m=a[6],y=(e.x-h)/m,p=(e.y-o)/m,x=(e.z-u)/m;return{x:y+_*p-f*x,y:-_*y+p+c*x,z:f*y-c*p+x}}}function Se(e){return e===li||e===ui}function rh(e,s,a){if(nh(e,s)||e.datum_type===Tn||s.datum_type===Tn)return a;var h=e.a,o=e.es;if(e.datum_type===Ti){var u=Js(e,!1,a);if(u!==0)return;h=$s,o=js}var c=s.a,f=s.b,_=s.es;if(s.datum_type===Ti&&(c=$s,f=uo,_=js),o===_&&h===c&&!Se(e.datum_type)&&!Se(s.datum_type))return a;if(a=ga(a,o,h),Se(e.datum_type)&&(a=sh(a,e.datum_type,e.datum_params)),Se(s.datum_type)&&(a=ah(a,s.datum_type,s.datum_params)),a=ya(a,_,c,f),s.datum_type===Ti){var m=Js(s,!0,a);if(m!==0)return}return a}function Js(e,s,a){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var h={x:-a.x,y:a.y},o={x:Number.NaN,y:Number.NaN},u=[];t:for(var c=0;c<e.grids.length;c++){var f=e.grids[c];if(u.push(f.name),f.isNull){o=h;break}if(f.mandatory,f.grid===null){if(f.mandatory)return console.log("Unable to find mandatory grid '"+f.name+"'"),-1;continue}for(var _=f.grid.subgrids,m=0,y=_.length;m<y;m++){var p=_[m],x=(Math.abs(p.del[1])+Math.abs(p.del[0]))/1e4,P=p.ll[0]-x,b=p.ll[1]-x,w=p.ll[0]+(p.lim[0]-1)*p.del[0]+x,S=p.ll[1]+(p.lim[1]-1)*p.del[1]+x;if(!(b>h.y||P>h.x||S<h.y||w<h.x)&&(o=oh(h,s,p),!isNaN(o.x)))break t}}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-h.x*Gt+" "+h.y*Gt+" tried: '"+u+"'"),-1):(a.x=-o.x,a.y=o.y,0)}function oh(e,s,a){var h={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return h;var o={x:e.x,y:e.y};o.x-=a.ll[0],o.y-=a.ll[1],o.x=I(o.x-Math.PI)+Math.PI;var u=Ys(o,a);if(s){if(isNaN(u.x))return h;u.x=o.x-u.x,u.y=o.y-u.y;var c=9,f=1e-12,_,m;do{if(m=Ys(u,a),isNaN(m.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}_={x:o.x-(m.x+u.x),y:o.y-(m.y+u.y)},u.x+=_.x,u.y+=_.y}while(c--&&Math.abs(_.x)>f&&Math.abs(_.y)>f);if(c<0)return console.log("Inverse grid shift iterator failed to converge."),h;h.x=I(u.x+a.ll[0]),h.y=u.y+a.ll[1]}else isNaN(u.x)||(h.x=e.x+u.x,h.y=e.y+u.y);return h}function Ys(e,s){var a={x:e.x/s.del[0],y:e.y/s.del[1]},h={x:Math.floor(a.x),y:Math.floor(a.y)},o={x:a.x-1*h.x,y:a.y-1*h.y},u={x:Number.NaN,y:Number.NaN},c;if(h.x<0||h.x>=s.lim[0]||h.y<0||h.y>=s.lim[1])return u;c=h.y*s.lim[0]+h.x;var f={x:s.cvs[c][0],y:s.cvs[c][1]};c++;var _={x:s.cvs[c][0],y:s.cvs[c][1]};c+=s.lim[0];var m={x:s.cvs[c][0],y:s.cvs[c][1]};c--;var y={x:s.cvs[c][0],y:s.cvs[c][1]},p=o.x*o.y,x=o.x*(1-o.y),P=(1-o.x)*(1-o.y),b=(1-o.x)*o.y;return u.x=P*f.x+x*_.x+b*y.x+p*m.x,u.y=P*f.y+x*_.y+b*y.y+p*m.y,u}function ta(e,s,a){var h=a.x,o=a.y,u=a.z||0,c,f,_,m={};for(_=0;_<3;_++)if(!(s&&_===2&&a.z===void 0))switch(_===0?(c=h,"ew".indexOf(e.axis[_])!==-1?f="x":f="y"):_===1?(c=o,"ns".indexOf(e.axis[_])!==-1?f="y":f="x"):(c=u,f="z"),e.axis[_]){case"e":m[f]=c;break;case"w":m[f]=-c;break;case"n":m[f]=c;break;case"s":m[f]=-c;break;case"u":a[f]!==void 0&&(m.z=c);break;case"d":a[f]!==void 0&&(m.z=-c);break;default:return null}return m}function Ma(e){var s={x:e[0],y:e[1]};return e.length>2&&(s.z=e[2]),e.length>3&&(s.m=e[3]),s}function hh(e){ia(e.x),ia(e.y)}function ia(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function lh(e,s){return(e.datum.datum_type===li||e.datum.datum_type===ui||e.datum.datum_type===Ti)&&s.datumCode!=="WGS84"||(s.datum.datum_type===li||s.datum.datum_type===ui||s.datum.datum_type===Ti)&&e.datumCode!=="WGS84"}function ke(e,s,a,h){var o;Array.isArray(a)?a=Ma(a):a={x:a.x,y:a.y,z:a.z,m:a.m};var u=a.z!==void 0;if(hh(a),e.datum&&s.datum&&lh(e,s)&&(o=new Ft("WGS84"),a=ke(e,o,a,h),e=o),h&&e.axis!=="enu"&&(a=ta(e,!1,a)),e.projName==="longlat")a={x:a.x*_t,y:a.y*_t,z:a.z||0};else if(e.to_meter&&(a={x:a.x*e.to_meter,y:a.y*e.to_meter,z:a.z||0}),a=e.inverse(a),!a)return;if(e.from_greenwich&&(a.x+=e.from_greenwich),a=rh(e.datum,s.datum,a),!!a)return s.from_greenwich&&(a={x:a.x-s.from_greenwich,y:a.y,z:a.z||0}),s.projName==="longlat"?a={x:a.x*Gt,y:a.y*Gt,z:a.z||0}:(a=s.forward(a),s.to_meter&&(a={x:a.x/s.to_meter,y:a.y/s.to_meter,z:a.z||0})),h&&s.axis!=="enu"?ta(s,!0,a):(a&&!u&&delete a.z,a)}var ea=Ft("WGS84");function bn(e,s,a,h){var o,u,c;return Array.isArray(a)?(o=ke(e,s,a,h)||{x:NaN,y:NaN},a.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof s.name<"u"&&s.name==="geocent"?typeof o.z=="number"?[o.x,o.y,o.z].concat(a.splice(3)):[o.x,o.y,a[2]].concat(a.splice(3)):[o.x,o.y].concat(a.splice(2)):[o.x,o.y]):(u=ke(e,s,a,h),c=Object.keys(a),c.length===2||c.forEach(function(f){if(typeof e.name<"u"&&e.name==="geocent"||typeof s.name<"u"&&s.name==="geocent"){if(f==="x"||f==="y"||f==="z")return}else if(f==="x"||f==="y")return;u[f]=a[f]}),u)}function na(e){return e instanceof Ft?e:e.oProj?e.oProj:Ft(e)}function Tt(e,s,a){e=na(e);var h=!1,o;return typeof s>"u"?(s=e,e=ea,h=!0):(typeof s.x<"u"||Array.isArray(s))&&(a=s,s=e,e=ea,h=!0),s=na(s),a?bn(e,s,a):(o={forward:function(u,c){return bn(e,s,u,c)},inverse:function(u,c){return bn(s,e,u,c)}},h&&(o.oProj=s),o)}var sa=6,xa="AJSAJS",wa="AFAFAF",Pi=65,bt=73,At=79,ji=86,Vi=90;const uh={forward:ba,inverse:fh,toPoint:Pa};function ba(e,s){return s=s||5,_h(ch({lat:e[1],lon:e[0]}),s)}function fh(e){var s=In(Ta(e.toUpperCase()));return s.lat&&s.lon?[s.lon,s.lat,s.lon,s.lat]:[s.left,s.bottom,s.right,s.top]}function Pa(e){var s=In(Ta(e.toUpperCase()));return s.lat&&s.lon?[s.lon,s.lat]:[(s.left+s.right)/2,(s.top+s.bottom)/2]}function Pn(e){return e*(Math.PI/180)}function aa(e){return 180*(e/Math.PI)}function ch(e){var s=e.lat,a=e.lon,h=6378137,o=.00669438,u=.9996,c,f,_,m,y,p,x,P=Pn(s),b=Pn(a),w,S;S=Math.floor((a+180)/6)+1,a===180&&(S=60),s>=56&&s<64&&a>=3&&a<12&&(S=32),s>=72&&s<84&&(a>=0&&a<9?S=31:a>=9&&a<21?S=33:a>=21&&a<33?S=35:a>=33&&a<42&&(S=37)),c=(S-1)*6-180+3,w=Pn(c),f=o/(1-o),_=h/Math.sqrt(1-o*Math.sin(P)*Math.sin(P)),m=Math.tan(P)*Math.tan(P),y=f*Math.cos(P)*Math.cos(P),p=Math.cos(P)*(b-w),x=h*((1-o/4-3*o*o/64-5*o*o*o/256)*P-(3*o/8+3*o*o/32+45*o*o*o/1024)*Math.sin(2*P)+(15*o*o/256+45*o*o*o/1024)*Math.sin(4*P)-35*o*o*o/3072*Math.sin(6*P));var O=u*_*(p+(1-m+y)*p*p*p/6+(5-18*m+m*m+72*y-58*f)*p*p*p*p*p/120)+5e5,R=u*(x+_*Math.tan(P)*(p*p/2+(5-m+9*y+4*y*y)*p*p*p*p/24+(61-58*m+m*m+600*y-330*f)*p*p*p*p*p*p/720));return s<0&&(R+=1e7),{northing:Math.round(R),easting:Math.round(O),zoneNumber:S,zoneLetter:dh(s)}}function In(e){var s=e.northing,a=e.easting,h=e.zoneLetter,o=e.zoneNumber;if(o<0||o>60)return null;var u=.9996,c=6378137,f=.00669438,_,m=(1-Math.sqrt(1-f))/(1+Math.sqrt(1-f)),y,p,x,P,b,w,S,O,R,z=a-5e5,V=s;h<"N"&&(V-=1e7),S=(o-1)*6-180+3,_=f/(1-f),w=V/u,O=w/(c*(1-f/4-3*f*f/64-5*f*f*f/256)),R=O+(3*m/2-27*m*m*m/32)*Math.sin(2*O)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*O)+151*m*m*m/96*Math.sin(6*O),y=c/Math.sqrt(1-f*Math.sin(R)*Math.sin(R)),p=Math.tan(R)*Math.tan(R),x=_*Math.cos(R)*Math.cos(R),P=c*(1-f)/Math.pow(1-f*Math.sin(R)*Math.sin(R),1.5),b=z/(y*u);var W=R-y*Math.tan(R)/P*(b*b/2-(5+3*p+10*x-4*x*x-9*_)*b*b*b*b/24+(61+90*p+298*x+45*p*p-252*_-3*x*x)*b*b*b*b*b*b/720);W=aa(W);var H=(b-(1+2*p+x)*b*b*b/6+(5-2*x+28*p-3*x*x+8*_+24*p*p)*b*b*b*b*b/120)/Math.cos(R);H=S+aa(H);var lt;if(e.accuracy){var Y=In({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});lt={top:Y.lat,right:Y.lon,bottom:W,left:H}}else lt={lat:W,lon:H};return lt}function dh(e){var s="Z";return 84>=e&&e>=72?s="X":72>e&&e>=64?s="W":64>e&&e>=56?s="V":56>e&&e>=48?s="U":48>e&&e>=40?s="T":40>e&&e>=32?s="S":32>e&&e>=24?s="R":24>e&&e>=16?s="Q":16>e&&e>=8?s="P":8>e&&e>=0?s="N":0>e&&e>=-8?s="M":-8>e&&e>=-16?s="L":-16>e&&e>=-24?s="K":-24>e&&e>=-32?s="J":-32>e&&e>=-40?s="H":-40>e&&e>=-48?s="G":-48>e&&e>=-56?s="F":-56>e&&e>=-64?s="E":-64>e&&e>=-72?s="D":-72>e&&e>=-80&&(s="C"),s}function _h(e,s){var a="00000"+e.easting,h="00000"+e.northing;return e.zoneNumber+e.zoneLetter+mh(e.easting,e.northing,e.zoneNumber)+a.substr(a.length-5,s)+h.substr(h.length-5,s)}function mh(e,s,a){var h=La(a),o=Math.floor(e/1e5),u=Math.floor(s/1e5)%20;return vh(o,u,h)}function La(e){var s=e%sa;return s===0&&(s=sa),s}function vh(e,s,a){var h=a-1,o=xa.charCodeAt(h),u=wa.charCodeAt(h),c=o+e-1,f=u+s,_=!1;c>Vi&&(c=c-Vi+Pi-1,_=!0),(c===bt||o<bt&&c>bt||(c>bt||o<bt)&&_)&&c++,(c===At||o<At&&c>At||(c>At||o<At)&&_)&&(c++,c===bt&&c++),c>Vi&&(c=c-Vi+Pi-1),f>ji?(f=f-ji+Pi-1,_=!0):_=!1,(f===bt||u<bt&&f>bt||(f>bt||u<bt)&&_)&&f++,(f===At||u<At&&f>At||(f>At||u<At)&&_)&&(f++,f===bt&&f++),f>ji&&(f=f-ji+Pi-1);var m=String.fromCharCode(c)+String.fromCharCode(f);return m}function Ta(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var s=e.length,a=null,h="",o,u=0;!/[A-Z]/.test(o=e.charAt(u));){if(u>=2)throw"MGRSPoint bad conversion from: "+e;h+=o,u++}var c=parseInt(h,10);if(u===0||u+3>s)throw"MGRSPoint bad conversion from: "+e;var f=e.charAt(u++);if(f<="A"||f==="B"||f==="Y"||f>="Z"||f==="I"||f==="O")throw"MGRSPoint zone letter "+f+" not handled: "+e;a=e.substring(u,u+=2);for(var _=La(c),m=ph(a.charAt(0),_),y=gh(a.charAt(1),_);y<yh(f);)y+=2e6;var p=s-u;if(p%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var x=p/2,P=0,b=0,w,S,O,R,z;return x>0&&(w=1e5/Math.pow(10,x),S=e.substring(u,u+x),P=parseFloat(S)*w,O=e.substring(u+x),b=parseFloat(O)*w),R=P+m,z=b+y,{easting:R,northing:z,zoneLetter:f,zoneNumber:c,accuracy:w}}function ph(e,s){for(var a=xa.charCodeAt(s-1),h=1e5,o=!1;a!==e.charCodeAt(0);){if(a++,a===bt&&a++,a===At&&a++,a>Vi){if(o)throw"Bad character: "+e;a=Pi,o=!0}h+=1e5}return h}function gh(e,s){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var a=wa.charCodeAt(s-1),h=0,o=!1;a!==e.charCodeAt(0);){if(a++,a===bt&&a++,a===At&&a++,a>ji){if(o)throw"Bad character: "+e;a=Pi,o=!0}h+=1e5}return h}function yh(e){var s;switch(e){case"C":s=11e5;break;case"D":s=2e6;break;case"E":s=28e5;break;case"F":s=37e5;break;case"G":s=46e5;break;case"H":s=55e5;break;case"J":s=64e5;break;case"K":s=73e5;break;case"L":s=82e5;break;case"M":s=91e5;break;case"N":s=0;break;case"P":s=8e5;break;case"Q":s=17e5;break;case"R":s=26e5;break;case"S":s=35e5;break;case"T":s=44e5;break;case"U":s=53e5;break;case"V":s=62e5;break;case"W":s=7e6;break;case"X":s=79e5;break;default:s=-1}if(s>=0)return s;throw"Invalid zone letter: "+e}function Si(e,s,a){if(!(this instanceof Si))return new Si(e,s,a);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof s>"u"){var h=e.split(",");this.x=parseFloat(h[0],10),this.y=parseFloat(h[1],10),this.z=parseFloat(h[2],10)||0}else this.x=e,this.y=s,this.z=a||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Si.fromMGRS=function(e){return new Si(Pa(e))};Si.prototype.toMGRS=function(e){return ba([this.x,this.y],e)};var Mh=1,xh=.25,ra=.046875,oa=.01953125,ha=.01068115234375,wh=.75,bh=.46875,Ph=.013020833333333334,Lh=.007120768229166667,Th=.3645833333333333,Ch=.005696614583333333,Sh=.3076171875;function Ca(e){var s=[];s[0]=Mh-e*(xh+e*(ra+e*(oa+e*ha))),s[1]=e*(wh-e*(ra+e*(oa+e*ha)));var a=e*e;return s[2]=a*(bh-e*(Ph+e*Lh)),a*=e,s[3]=a*(Th-e*Ch),s[4]=a*e*Sh,s}function qe(e,s,a,h){return a*=s,s*=s,h[0]*e-a*(h[1]+s*(h[2]+s*(h[3]+s*h[4])))}var Eh=20;function Sa(e,s,a){for(var h=1/(1-s),o=e,u=Eh;u;--u){var c=Math.sin(o),f=1-s*c*c;if(f=(qe(o,c,Math.cos(o),a)-e)*(f*Math.sqrt(f))*h,o-=f,Math.abs(f)<E)return o}return o}function Ah(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Ca(this.es),this.ml0=qe(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Ih(e){var s=e.x,a=e.y,h=I(s-this.long0),o,u,c,f=Math.sin(a),_=Math.cos(a);if(this.es){var y=_*h,p=Math.pow(y,2),x=this.ep2*Math.pow(_,2),P=Math.pow(x,2),b=Math.abs(_)>E?Math.tan(a):0,w=Math.pow(b,2),S=Math.pow(w,2);o=1-this.es*Math.pow(f,2),y=y/Math.sqrt(o);var O=qe(a,f,_,this.en);u=this.a*(this.k0*y*(1+p/6*(1-w+x+p/20*(5-18*w+S+14*x-58*w*x+p/42*(61+179*S-S*w-479*w)))))+this.x0,c=this.a*(this.k0*(O-this.ml0+f*h*y/2*(1+p/12*(5-w+9*x+4*P+p/30*(61+S-58*w+270*x-330*w*x+p/56*(1385+543*S-S*w-3111*w))))))+this.y0}else{var m=_*Math.sin(h);if(Math.abs(Math.abs(m)-1)<E)return 93;if(u=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,c=_*Math.cos(h)/Math.sqrt(1-Math.pow(m,2)),m=Math.abs(c),m>=1){if(m-1>E)return 93;c=0}else c=Math.acos(c);a<0&&(c=-c),c=this.a*this.k0*(c-this.lat0)+this.y0}return e.x=u,e.y=c,e}function Oh(e){var s,a,h,o,u=(e.x-this.x0)*(1/this.a),c=(e.y-this.y0)*(1/this.a);if(this.es)if(s=this.ml0+c/this.k0,a=Sa(s,this.es,this.en),Math.abs(a)<C){var p=Math.sin(a),x=Math.cos(a),P=Math.abs(x)>E?Math.tan(a):0,b=this.ep2*Math.pow(x,2),w=Math.pow(b,2),S=Math.pow(P,2),O=Math.pow(S,2);s=1-this.es*Math.pow(p,2);var R=u*Math.sqrt(s)/this.k0,z=Math.pow(R,2);s=s*P,h=a-s*z/(1-this.es)*.5*(1-z/12*(5+3*S-9*b*S+b-4*w-z/30*(61+90*S-252*b*S+45*O+46*b-z/56*(1385+3633*S+4095*O+1574*O*S)))),o=I(this.long0+R*(1-z/6*(1+2*S+b-z/20*(5+28*S+24*O+8*b*S+6*b-z/42*(61+662*S+1320*O+720*O*S))))/x)}else h=C*se(c),o=0;else{var f=Math.exp(u/this.k0),_=.5*(f-1/f),m=this.lat0+c/this.k0,y=Math.cos(m);s=Math.sqrt((1-Math.pow(y,2))/(1+Math.pow(_,2))),h=Math.asin(s),c<0&&(h=-h),_===0&&y===0?o=0:o=I(Math.atan2(_,y)+this.long0)}return e.x=o,e.y=h,e}var Nh=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Ie={init:Ah,forward:Ih,inverse:Oh,names:Nh};function Ea(e){var s=Math.exp(e);return s=(s-1/s)/2,s}function It(e,s){e=Math.abs(e),s=Math.abs(s);var a=Math.max(e,s),h=Math.min(e,s)/(a||1);return a*Math.sqrt(1+Math.pow(h,2))}function zh(e){var s=1+e,a=s-1;return a===0?e:e*Math.log(s)/a}function kh(e){var s=Math.abs(e);return s=zh(s*(1+s/(It(1,s)+1))),e<0?-s:s}function On(e,s){for(var a=2*Math.cos(2*s),h=e.length-1,o=e[h],u=0,c;--h>=0;)c=-u+a*o+e[h],u=o,o=c;return s+c*Math.sin(2*s)}function Rh(e,s){for(var a=2*Math.cos(s),h=e.length-1,o=e[h],u=0,c;--h>=0;)c=-u+a*o+e[h],u=o,o=c;return Math.sin(s)*c}function Bh(e){var s=Math.exp(e);return s=(s+1/s)/2,s}function Aa(e,s,a){for(var h=Math.sin(s),o=Math.cos(s),u=Ea(a),c=Bh(a),f=2*o*c,_=-2*h*u,m=e.length-1,y=e[m],p=0,x=0,P=0,b,w;--m>=0;)b=x,w=p,x=y,p=P,y=-b+f*x-_*p+e[m],P=-w+_*x+f*p;return f=h*c,_=o*u,[f*y-_*P,f*P+_*y]}function Zh(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ie.init.apply(this),this.forward=Ie.forward,this.inverse=Ie.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),s=e/(2-e),a=s;this.cgb[0]=s*(2+s*(-2/3+s*(-2+s*(116/45+s*(26/45+s*(-2854/675)))))),this.cbg[0]=s*(-2+s*(2/3+s*(4/3+s*(-82/45+s*(32/45+s*(4642/4725)))))),a=a*s,this.cgb[1]=a*(7/3+s*(-8/5+s*(-227/45+s*(2704/315+s*(2323/945))))),this.cbg[1]=a*(5/3+s*(-16/15+s*(-13/9+s*(904/315+s*(-1522/945))))),a=a*s,this.cgb[2]=a*(56/15+s*(-136/35+s*(-1262/105+s*(73814/2835)))),this.cbg[2]=a*(-26/15+s*(34/21+s*(8/5+s*(-12686/2835)))),a=a*s,this.cgb[3]=a*(4279/630+s*(-332/35+s*(-399572/14175))),this.cbg[3]=a*(1237/630+s*(-12/5+s*(-24832/14175))),a=a*s,this.cgb[4]=a*(4174/315+s*(-144838/6237)),this.cbg[4]=a*(-734/315+s*(109598/31185)),a=a*s,this.cgb[5]=a*(601676/22275),this.cbg[5]=a*(444337/155925),a=Math.pow(s,2),this.Qn=this.k0/(1+s)*(1+a*(1/4+a*(1/64+a/256))),this.utg[0]=s*(-.5+s*(2/3+s*(-37/96+s*(1/360+s*(81/512+s*(-96199/604800)))))),this.gtu[0]=s*(.5+s*(-2/3+s*(5/16+s*(41/180+s*(-127/288+s*(7891/37800)))))),this.utg[1]=a*(-1/48+s*(-1/15+s*(437/1440+s*(-46/105+s*(1118711/3870720))))),this.gtu[1]=a*(13/48+s*(-3/5+s*(557/1440+s*(281/630+s*(-1983433/1935360))))),a=a*s,this.utg[2]=a*(-17/480+s*(37/840+s*(209/4480+s*(-5569/90720)))),this.gtu[2]=a*(61/240+s*(-103/140+s*(15061/26880+s*(167603/181440)))),a=a*s,this.utg[3]=a*(-4397/161280+s*(11/504+s*(830251/7257600))),this.gtu[3]=a*(49561/161280+s*(-179/168+s*(6601661/7257600))),a=a*s,this.utg[4]=a*(-4583/161280+s*(108847/3991680)),this.gtu[4]=a*(34729/80640+s*(-3418889/1995840)),a=a*s,this.utg[5]=a*(-20648693/638668800),this.gtu[5]=a*(212378941/319334400);var h=On(this.cbg,this.lat0);this.Zb=-this.Qn*(h+Rh(this.gtu,2*h))}function Dh(e){var s=I(e.x-this.long0),a=e.y;a=On(this.cbg,a);var h=Math.sin(a),o=Math.cos(a),u=Math.sin(s),c=Math.cos(s);a=Math.atan2(h,c*o),s=Math.atan2(u*o,It(h,o*c)),s=kh(Math.tan(s));var f=Aa(this.gtu,2*a,2*s);a=a+f[0],s=s+f[1];var _,m;return Math.abs(s)<=2.623395162778?(_=this.a*(this.Qn*s)+this.x0,m=this.a*(this.Qn*a+this.Zb)+this.y0):(_=1/0,m=1/0),e.x=_,e.y=m,e}function qh(e){var s=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);a=(a-this.Zb)/this.Qn,s=s/this.Qn;var h,o;if(Math.abs(s)<=2.623395162778){var u=Aa(this.utg,2*a,2*s);a=a+u[0],s=s+u[1],s=Math.atan(Ea(s));var c=Math.sin(a),f=Math.cos(a),_=Math.sin(s),m=Math.cos(s);a=Math.atan2(c*m,It(_,m*f)),s=Math.atan2(_,m*f),h=I(s+this.long0),o=On(this.cgb,a)}else h=1/0,o=1/0;return e.x=h,e.y=o,e}var Gh=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Oe={init:Zh,forward:Dh,inverse:qh,names:Gh};function Fh(e,s){if(e===void 0){if(e=Math.floor((I(s)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var Wh="etmerc";function Hh(){var e=Fh(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*_t,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Oe.init.apply(this),this.forward=Oe.forward,this.inverse=Oe.inverse}var Uh=["Universal Transverse Mercator System","utm"];const $h={init:Hh,names:Uh,dependsOn:Wh};function Nn(e,s){return Math.pow((1-e)/(1+e),s)}var jh=20;function Vh(){var e=Math.sin(this.lat0),s=Math.cos(this.lat0);s*=s,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*s*s/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+K)/(Math.pow(Math.tan(.5*this.lat0+K),this.C)*Nn(this.e*e,this.ratexp))}function Kh(e){var s=e.x,a=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*a+K),this.C)*Nn(this.e*Math.sin(a),this.ratexp))-C,e.x=this.C*s,e}function Xh(e){for(var s=1e-14,a=e.x/this.C,h=e.y,o=Math.pow(Math.tan(.5*h+K)/this.K,1/this.C),u=jh;u>0&&(h=2*Math.atan(o*Nn(this.e*Math.sin(e.y),-.5*this.e))-C,!(Math.abs(h-e.y)<s));--u)e.y=h;return u?(e.x=a,e.y=h,e):null}var Qh=["gauss"];const zn={init:Vh,forward:Kh,inverse:Xh,names:Qh};function Jh(){zn.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Yh(e){var s,a,h,o;return e.x=I(e.x-this.long0),zn.forward.apply(this,[e]),s=Math.sin(e.y),a=Math.cos(e.y),h=Math.cos(e.x),o=this.k0*this.R2/(1+this.sinc0*s+this.cosc0*a*h),e.x=o*a*Math.sin(e.x),e.y=o*(this.cosc0*s-this.sinc0*a*h),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function tl(e){var s,a,h,o,u;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,u=It(e.x,e.y)){var c=2*Math.atan2(u,this.R2);s=Math.sin(c),a=Math.cos(c),o=Math.asin(a*this.sinc0+e.y*s*this.cosc0/u),h=Math.atan2(e.x*s,u*this.cosc0*a-e.y*this.sinc0*s)}else o=this.phic0,h=0;return e.x=h,e.y=o,zn.inverse.apply(this,[e]),e.x=I(e.x+this.long0),e}var il=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const el={init:Jh,forward:Yh,inverse:tl,names:il};function nl(e,s,a){return s*=a,Math.tan(.5*(C+e))*Math.pow((1-s)/(1+s),.5*a)}function sl(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=E&&(this.k0=.5*(1+se(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=E&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=E&&Math.abs(Math.cos(this.lat_ts))>E&&(this.k0=.5*this.cons*Wt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/zt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Wt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-C,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function al(e){var s=e.x,a=e.y,h=Math.sin(a),o=Math.cos(a),u,c,f,_,m,y,p=I(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=E&&Math.abs(a+this.lat0)<=E?(e.x=NaN,e.y=NaN,e):this.sphere?(u=2*this.k0/(1+this.sinlat0*h+this.coslat0*o*Math.cos(p)),e.x=this.a*u*o*Math.sin(p)+this.x0,e.y=this.a*u*(this.coslat0*h-this.sinlat0*o*Math.cos(p))+this.y0,e):(c=2*Math.atan(this.ssfn_(a,h,this.e))-C,_=Math.cos(c),f=Math.sin(c),Math.abs(this.coslat0)<=E?(m=zt(this.e,a*this.con,this.con*h),y=2*this.a*this.k0*m/this.cons,e.x=this.x0+y*Math.sin(s-this.long0),e.y=this.y0-this.con*y*Math.cos(s-this.long0),e):(Math.abs(this.sinlat0)<E?(u=2*this.a*this.k0/(1+_*Math.cos(p)),e.y=u*f):(u=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*_*Math.cos(p))),e.y=u*(this.cosX0*f-this.sinX0*_*Math.cos(p))+this.y0),e.x=u*_*Math.sin(p)+this.x0,e))}function rl(e){e.x-=this.x0,e.y-=this.y0;var s,a,h,o,u,c=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var f=2*Math.atan(c/(2*this.a*this.k0));return s=this.long0,a=this.lat0,c<=E?(e.x=s,e.y=a,e):(a=Math.asin(Math.cos(f)*this.sinlat0+e.y*Math.sin(f)*this.coslat0/c),Math.abs(this.coslat0)<E?this.lat0>0?s=I(this.long0+Math.atan2(e.x,-1*e.y)):s=I(this.long0+Math.atan2(e.x,e.y)):s=I(this.long0+Math.atan2(e.x*Math.sin(f),c*this.coslat0*Math.cos(f)-e.y*this.sinlat0*Math.sin(f))),e.x=s,e.y=a,e)}else if(Math.abs(this.coslat0)<=E){if(c<=E)return a=this.lat0,s=this.long0,e.x=s,e.y=a,e;e.x*=this.con,e.y*=this.con,h=c*this.cons/(2*this.a*this.k0),a=this.con*ne(this.e,h),s=this.con*I(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else o=2*Math.atan(c*this.cosX0/(2*this.a*this.k0*this.ms1)),s=this.long0,c<=E?u=this.X0:(u=Math.asin(Math.cos(o)*this.sinX0+e.y*Math.sin(o)*this.cosX0/c),s=I(this.long0+Math.atan2(e.x*Math.sin(o),c*this.cosX0*Math.cos(o)-e.y*this.sinX0*Math.sin(o)))),a=-1*ne(this.e,Math.tan(.5*(C+u)));return e.x=s,e.y=a,e}var ol=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const hl={init:sl,forward:al,inverse:rl,names:ol,ssfn_:nl};function ll(){var e=this.lat0;this.lambda0=this.long0;var s=Math.sin(e),a=this.a,h=this.rf,o=1/h,u=2*o-Math.pow(o,2),c=this.e=Math.sqrt(u);this.R=this.k0*a*Math.sqrt(1-u)/(1-u*Math.pow(s,2)),this.alpha=Math.sqrt(1+u/(1-u)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(s/this.alpha);var f=Math.log(Math.tan(Math.PI/4+this.b0/2)),_=Math.log(Math.tan(Math.PI/4+e/2)),m=Math.log((1+c*s)/(1-c*s));this.K=f-this.alpha*_+this.alpha*c/2*m}function ul(e){var s=Math.log(Math.tan(Math.PI/4-e.y/2)),a=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),h=-this.alpha*(s+a)+this.K,o=2*(Math.atan(Math.exp(h))-Math.PI/4),u=this.alpha*(e.x-this.lambda0),c=Math.atan(Math.sin(u)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(u))),f=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(u));return e.y=this.R/2*Math.log((1+Math.sin(f))/(1-Math.sin(f)))+this.y0,e.x=this.R*c+this.x0,e}function fl(e){for(var s=e.x-this.x0,a=e.y-this.y0,h=s/this.R,o=2*(Math.atan(Math.exp(a/this.R))-Math.PI/4),u=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(h)),c=Math.atan(Math.sin(h)/(Math.cos(this.b0)*Math.cos(h)-Math.sin(this.b0)*Math.tan(o))),f=this.lambda0+c/this.alpha,_=0,m=u,y=-1e3,p=0;Math.abs(m-y)>1e-7;){if(++p>20)return;_=1/this.alpha*(Math.log(Math.tan(Math.PI/4+u/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(m))/2)),y=m,m=2*Math.atan(Math.exp(_))-Math.PI/2}return e.x=f,e.y=m,e}var cl=["somerc"];const dl={init:ll,forward:ul,inverse:fl,names:cl};var xi=1e-7;function _l(e){var s=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],a=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||s.indexOf(a)!==-1}function ml(){var e,s,a,h,o,u,c,f,_,m,y=0,p,x=0,P=0,b=0,w=0,S=0,O=0;this.no_off=_l(this),this.no_rot="no_rot"in this;var R=!1;"alpha"in this&&(R=!0);var z=!1;if("rectified_grid_angle"in this&&(z=!0),R&&(O=this.alpha),z&&(y=this.rectified_grid_angle*_t),R||z)x=this.longc;else if(P=this.long1,w=this.lat1,b=this.long2,S=this.lat2,Math.abs(w-S)<=xi||(e=Math.abs(w))<=xi||Math.abs(e-C)<=xi||Math.abs(Math.abs(this.lat0)-C)<=xi||Math.abs(Math.abs(S)-C)<=xi)throw new Error;var V=1-this.es;s=Math.sqrt(V),Math.abs(this.lat0)>E?(f=Math.sin(this.lat0),a=Math.cos(this.lat0),e=1-this.es*f*f,this.B=a*a,this.B=Math.sqrt(1+this.es*this.B*this.B/V),this.A=this.B*this.k0*s/e,h=this.B*s/(a*Math.sqrt(e)),o=h*h-1,o<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=h,this.E*=Math.pow(zt(this.e,this.lat0,f),this.B)):(this.B=1/s,this.A=this.k0,this.E=h=o=1),R||z?(R?(p=Math.asin(Math.sin(O)/h),z||(y=O)):(p=y,O=Math.asin(h*Math.sin(p))),this.lam0=x-Math.asin(.5*(o-1/o)*Math.tan(p))/this.B):(u=Math.pow(zt(this.e,w,Math.sin(w)),this.B),c=Math.pow(zt(this.e,S,Math.sin(S)),this.B),o=this.E/u,_=(c-u)/(c+u),m=this.E*this.E,m=(m-c*u)/(m+c*u),e=P-b,e<-Math.pi?b-=ie:e>Math.pi&&(b+=ie),this.lam0=I(.5*(P+b)-Math.atan(m*Math.tan(.5*this.B*(P-b))/_)/this.B),p=Math.atan(2*Math.sin(this.B*I(P-this.lam0))/(o-1/o)),y=O=Math.asin(h*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(y),this.cosrot=Math.cos(y),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(h*h-1)/Math.cos(O))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(K-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(K+o))}function vl(e){var s={},a,h,o,u,c,f,_,m;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-C)>E){if(c=this.E/Math.pow(zt(this.e,e.y,Math.sin(e.y)),this.B),f=1/c,a=.5*(c-f),h=.5*(c+f),u=Math.sin(this.B*e.x),o=(a*this.singam-u*this.cosgam)/h,Math.abs(Math.abs(o)-1)<E)throw new Error;m=.5*this.ArB*Math.log((1-o)/(1+o)),f=Math.cos(this.B*e.x),Math.abs(f)<xi?_=this.A*e.x:_=this.ArB*Math.atan2(a*this.cosgam+u*this.singam,f)}else m=e.y>0?this.v_pole_n:this.v_pole_s,_=this.ArB*e.y;return this.no_rot?(s.x=_,s.y=m):(_-=this.u_0,s.x=m*this.cosrot+_*this.sinrot,s.y=_*this.cosrot-m*this.sinrot),s.x=this.a*s.x+this.x0,s.y=this.a*s.y+this.y0,s}function pl(e){var s,a,h,o,u,c,f,_={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(a=e.y,s=e.x):(a=e.x*this.cosrot-e.y*this.sinrot,s=e.y*this.cosrot+e.x*this.sinrot+this.u_0),h=Math.exp(-this.BrA*a),o=.5*(h-1/h),u=.5*(h+1/h),c=Math.sin(this.BrA*s),f=(c*this.cosgam+o*this.singam)/u,Math.abs(Math.abs(f)-1)<E)_.x=0,_.y=f<0?-C:C;else{if(_.y=this.E/Math.sqrt((1+f)/(1-f)),_.y=ne(this.e,Math.pow(_.y,1/this.B)),_.y===1/0)throw new Error;_.x=-this.rB*Math.atan2(o*this.cosgam-c*this.singam,Math.cos(this.BrA*s))}return _.x+=this.lam0,_}var gl=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const yl={init:ml,forward:vl,inverse:pl,names:gl};function Ml(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<E)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var s=Math.sin(this.lat1),a=Math.cos(this.lat1),h=Wt(this.e,s,a),o=zt(this.e,this.lat1,s),u=Math.sin(this.lat2),c=Math.cos(this.lat2),f=Wt(this.e,u,c),_=zt(this.e,this.lat2,u),m=zt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>E?this.ns=Math.log(h/f)/Math.log(o/_):this.ns=s,isNaN(this.ns)&&(this.ns=s),this.f0=h/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(m,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function xl(e){var s=e.x,a=e.y;Math.abs(2*Math.abs(a)-Math.PI)<=E&&(a=se(a)*(C-2*E));var h=Math.abs(Math.abs(a)-C),o,u;if(h>E)o=zt(this.e,a,Math.sin(a)),u=this.a*this.f0*Math.pow(o,this.ns);else{if(h=a*this.ns,h<=0)return null;u=0}var c=this.ns*I(s-this.long0);return e.x=this.k0*(u*Math.sin(c))+this.x0,e.y=this.k0*(this.rh-u*Math.cos(c))+this.y0,e}function wl(e){var s,a,h,o,u,c=(e.x-this.x0)/this.k0,f=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(s=Math.sqrt(c*c+f*f),a=1):(s=-Math.sqrt(c*c+f*f),a=-1);var _=0;if(s!==0&&(_=Math.atan2(a*c,a*f)),s!==0||this.ns>0){if(a=1/this.ns,h=Math.pow(s/(this.a*this.f0),a),o=ne(this.e,h),o===-9999)return null}else o=-C;return u=I(_/this.ns+this.long0),e.x=u,e.y=o,e}var bl=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Pl={init:Ml,forward:xl,inverse:wl,names:bl};function Ll(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Tl(e){var s,a,h,o,u,c,f,_=e.x,m=e.y,y=I(_-this.long0);return s=Math.pow((1+this.e*Math.sin(m))/(1-this.e*Math.sin(m)),this.alfa*this.e/2),a=2*(Math.atan(this.k*Math.pow(Math.tan(m/2+this.s45),this.alfa)/s)-this.s45),h=-y*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(a)+Math.sin(this.ad)*Math.cos(a)*Math.cos(h)),u=Math.asin(Math.cos(a)*Math.sin(h)/Math.cos(o)),c=this.n*u,f=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),e.y=f*Math.cos(c)/1,e.x=f*Math.sin(c)/1,this.czech||(e.y*=-1,e.x*=-1),e}function Cl(e){var s,a,h,o,u,c,f,_,m=e.x;e.x=e.y,e.y=m,this.czech||(e.y*=-1,e.x*=-1),c=Math.sqrt(e.x*e.x+e.y*e.y),u=Math.atan2(e.y,e.x),o=u/Math.sin(this.s0),h=2*(Math.atan(Math.pow(this.ro0/c,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),s=Math.asin(Math.cos(this.ad)*Math.sin(h)-Math.sin(this.ad)*Math.cos(h)*Math.cos(o)),a=Math.asin(Math.cos(h)*Math.sin(o)/Math.cos(s)),e.x=this.long0-a/this.alfa,f=s,_=0;var y=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(s/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.e/2))-this.s45),Math.abs(f-e.y)<1e-10&&(_=1),f=e.y,y+=1;while(_===0&&y<15);return y>=15?null:e}var Sl=["Krovak","krovak"];const El={init:Ll,forward:Tl,inverse:Cl,names:Sl};function gt(e,s,a,h,o){return e*o-s*Math.sin(2*o)+a*Math.sin(4*o)-h*Math.sin(6*o)}function ae(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function re(e){return .375*e*(1+.25*e*(1+.46875*e))}function oe(e){return .05859375*e*e*(1+.75*e)}function he(e){return e*e*e*(35/3072)}function Ei(e,s,a){var h=s*a;return e/Math.sqrt(1-h*h)}function Ai(e){return Math.abs(e)<C?e:e-se(e)*Math.PI}function Re(e,s,a,h,o){var u,c;u=e/s;for(var f=0;f<15;f++)if(c=(e-(s*u-a*Math.sin(2*u)+h*Math.sin(4*u)-o*Math.sin(6*u)))/(s-2*a*Math.cos(2*u)+4*h*Math.cos(4*u)-6*o*Math.cos(6*u)),u+=c,Math.abs(c)<=1e-10)return u;return NaN}function Al(){this.sphere||(this.e0=ae(this.es),this.e1=re(this.es),this.e2=oe(this.es),this.e3=he(this.es),this.ml0=this.a*gt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Il(e){var s,a,h=e.x,o=e.y;if(h=I(h-this.long0),this.sphere)s=this.a*Math.asin(Math.cos(o)*Math.sin(h)),a=this.a*(Math.atan2(Math.tan(o),Math.cos(h))-this.lat0);else{var u=Math.sin(o),c=Math.cos(o),f=Ei(this.a,this.e,u),_=Math.tan(o)*Math.tan(o),m=h*Math.cos(o),y=m*m,p=this.es*c*c/(1-this.es),x=this.a*gt(this.e0,this.e1,this.e2,this.e3,o);s=f*m*(1-y*_*(1/6-(8-_+8*p)*y/120)),a=x-this.ml0+f*u/c*y*(.5+(5-_+6*p)*y/24)}return e.x=s+this.x0,e.y=a+this.y0,e}function Ol(e){e.x-=this.x0,e.y-=this.y0;var s=e.x/this.a,a=e.y/this.a,h,o;if(this.sphere){var u=a+this.lat0;h=Math.asin(Math.sin(u)*Math.cos(s)),o=Math.atan2(Math.tan(s),Math.cos(u))}else{var c=this.ml0/this.a+a,f=Re(c,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(f)-C)<=E)return e.x=this.long0,e.y=C,a<0&&(e.y*=-1),e;var _=Ei(this.a,this.e,Math.sin(f)),m=_*_*_/this.a/this.a*(1-this.es),y=Math.pow(Math.tan(f),2),p=s*this.a/_,x=p*p;h=f-_*Math.tan(f)/m*p*p*(.5-(1+3*y)*p*p/24),o=p*(1-x*(y/3+(1+3*y)*y*x/15))/Math.cos(f)}return e.x=I(o+this.long0),e.y=Ai(h),e}var Nl=["Cassini","Cassini_Soldner","cass"];const zl={init:Al,forward:Il,inverse:Ol,names:Nl};function ti(e,s){var a;return e>1e-7?(a=e*s,(1-e*e)*(s/(1-a*a)-.5/e*Math.log((1-a)/(1+a)))):2*s}var kl=1,Rl=2,Bl=3,Zl=4;function Dl(){var e=Math.abs(this.lat0);if(Math.abs(e-C)<E?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<E?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var s;switch(this.qp=ti(this.e,1),this.mmf=.5/(1-this.es),this.apa=Vl(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),s=Math.sin(this.lat0),this.sinb1=ti(this.e,s)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*s*s)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function ql(e){var s,a,h,o,u,c,f,_,m,y,p=e.x,x=e.y;if(p=I(p-this.long0),this.sphere){if(u=Math.sin(x),y=Math.cos(x),h=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(a=this.mode===this.EQUIT?1+y*h:1+this.sinph0*u+this.cosph0*y*h,a<=E)return null;a=Math.sqrt(2/a),s=a*y*Math.sin(p),a*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*y*h}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),Math.abs(x+this.lat0)<E)return null;a=K-x*.5,a=2*(this.mode===this.S_POLE?Math.cos(a):Math.sin(a)),s=a*Math.sin(p),a*=h}}else{switch(f=0,_=0,m=0,h=Math.cos(p),o=Math.sin(p),u=Math.sin(x),c=ti(this.e,u),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=c/this.qp,_=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:m=1+this.sinb1*f+this.cosb1*_*h;break;case this.EQUIT:m=1+_*h;break;case this.N_POLE:m=C+x,c=this.qp-c;break;case this.S_POLE:m=x-C,c=this.qp+c;break}if(Math.abs(m)<E)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:m=Math.sqrt(2/m),this.mode===this.OBLIQ?a=this.ymf*m*(this.cosb1*f-this.sinb1*_*h):a=(m=Math.sqrt(2/(1+_*h)))*f*this.ymf,s=this.xmf*m*_*o;break;case this.N_POLE:case this.S_POLE:c>=0?(s=(m=Math.sqrt(c))*o,a=h*(this.mode===this.S_POLE?m:-m)):s=a=0;break}}return e.x=this.a*s+this.x0,e.y=this.a*a+this.y0,e}function Gl(e){e.x-=this.x0,e.y-=this.y0;var s=e.x/this.a,a=e.y/this.a,h,o,u,c,f,_,m;if(this.sphere){var y=0,p,x=0;if(p=Math.sqrt(s*s+a*a),o=p*.5,o>1)return null;switch(o=2*Math.asin(o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(x=Math.sin(o),y=Math.cos(o)),this.mode){case this.EQUIT:o=Math.abs(p)<=E?0:Math.asin(a*x/p),s*=x,a=y*p;break;case this.OBLIQ:o=Math.abs(p)<=E?this.lat0:Math.asin(y*this.sinph0+a*x*this.cosph0/p),s*=x*this.cosph0,a=(y-Math.sin(o)*this.sinph0)*p;break;case this.N_POLE:a=-a,o=C-o;break;case this.S_POLE:o-=C;break}h=a===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(s,a)}else{if(m=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(s/=this.dd,a*=this.dd,_=Math.sqrt(s*s+a*a),_<E)return e.x=this.long0,e.y=this.lat0,e;c=2*Math.asin(.5*_/this.rq),u=Math.cos(c),s*=c=Math.sin(c),this.mode===this.OBLIQ?(m=u*this.sinb1+a*c*this.cosb1/_,f=this.qp*m,a=_*this.cosb1*u-a*this.sinb1*c):(m=a*c/_,f=this.qp*m,a=_*u)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),f=s*s+a*a,!f)return e.x=this.long0,e.y=this.lat0,e;m=1-f/this.qp,this.mode===this.S_POLE&&(m=-m)}h=Math.atan2(s,a),o=Kl(Math.asin(m),this.apa)}return e.x=I(this.long0+h),e.y=o,e}var Fl=.3333333333333333,Wl=.17222222222222222,Hl=.10257936507936508,Ul=.06388888888888888,$l=.0664021164021164,jl=.016415012942191543;function Vl(e){var s,a=[];return a[0]=e*Fl,s=e*e,a[0]+=s*Wl,a[1]=s*Ul,s*=e,a[0]+=s*Hl,a[1]+=s*$l,a[2]=s*jl,a}function Kl(e,s){var a=e+e;return e+s[0]*Math.sin(a)+s[1]*Math.sin(a+a)+s[2]*Math.sin(a+a+a)}var Xl=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Ql={init:Dl,forward:ql,inverse:Gl,names:Xl,S_POLE:kl,N_POLE:Rl,EQUIT:Bl,OBLIQ:Zl};function ei(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function Jl(){Math.abs(this.lat1+this.lat2)<E||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Wt(this.e3,this.sin_po,this.cos_po),this.qs1=ti(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Wt(this.e3,this.sin_po,this.cos_po),this.qs2=ti(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ti(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>E?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Yl(e){var s=e.x,a=e.y;this.sin_phi=Math.sin(a),this.cos_phi=Math.cos(a);var h=ti(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*h)/this.ns0,u=this.ns0*I(s-this.long0),c=o*Math.sin(u)+this.x0,f=this.rh-o*Math.cos(u)+this.y0;return e.x=c,e.y=f,e}function tu(e){var s,a,h,o,u,c;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(s=Math.sqrt(e.x*e.x+e.y*e.y),h=1):(s=-Math.sqrt(e.x*e.x+e.y*e.y),h=-1),o=0,s!==0&&(o=Math.atan2(h*e.x,h*e.y)),h=s*this.ns0/this.a,this.sphere?c=Math.asin((this.c-h*h)/(2*this.ns0)):(a=(this.c-h*h)/this.ns0,c=this.phi1z(this.e3,a)),u=I(o/this.ns0+this.long0),e.x=u,e.y=c,e}function iu(e,s){var a,h,o,u,c,f=ei(.5*s);if(e<E)return f;for(var _=e*e,m=1;m<=25;m++)if(a=Math.sin(f),h=Math.cos(f),o=e*a,u=1-o*o,c=.5*u*u/h*(s/(1-_)-a/u+.5/e*Math.log((1-o)/(1+o))),f=f+c,Math.abs(c)<=1e-7)return f;return null}var eu=["Albers_Conic_Equal_Area","Albers","aea"];const nu={init:Jl,forward:Yl,inverse:tu,names:eu,phi1z:iu};function su(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function au(e){var s,a,h,o,u,c,f,_,m=e.x,y=e.y;return h=I(m-this.long0),s=Math.sin(y),a=Math.cos(y),o=Math.cos(h),c=this.sin_p14*s+this.cos_p14*a*o,u=1,c>0||Math.abs(c)<=E?(f=this.x0+this.a*u*a*Math.sin(h)/c,_=this.y0+this.a*u*(this.cos_p14*s-this.sin_p14*a*o)/c):(f=this.x0+this.infinity_dist*a*Math.sin(h),_=this.y0+this.infinity_dist*(this.cos_p14*s-this.sin_p14*a*o)),e.x=f,e.y=_,e}function ru(e){var s,a,h,o,u,c;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(s=Math.sqrt(e.x*e.x+e.y*e.y))?(o=Math.atan2(s,this.rc),a=Math.sin(o),h=Math.cos(o),c=ei(h*this.sin_p14+e.y*a*this.cos_p14/s),u=Math.atan2(e.x*a,s*this.cos_p14*h-e.y*this.sin_p14*a),u=I(this.long0+u)):(c=this.phic0,u=0),e.x=u,e.y=c,e}var ou=["gnom"];const hu={init:su,forward:au,inverse:ru,names:ou};function lu(e,s){var a=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(s)-a)<1e-6)return s<0?-1*C:C;for(var h=Math.asin(.5*s),o,u,c,f,_=0;_<30;_++)if(u=Math.sin(h),c=Math.cos(h),f=e*u,o=Math.pow(1-f*f,2)/(2*c)*(s/(1-e*e)-u/(1-f*f)+.5/e*Math.log((1-f)/(1+f))),h+=o,Math.abs(o)<=1e-10)return h;return NaN}function uu(){this.sphere||(this.k0=Wt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function fu(e){var s=e.x,a=e.y,h,o,u=I(s-this.long0);if(this.sphere)h=this.x0+this.a*u*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var c=ti(this.e,Math.sin(a));h=this.x0+this.a*this.k0*u,o=this.y0+this.a*c*.5/this.k0}return e.x=h,e.y=o,e}function cu(e){e.x-=this.x0,e.y-=this.y0;var s,a;return this.sphere?(s=I(this.long0+e.x/this.a/Math.cos(this.lat_ts)),a=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(a=lu(this.e,2*e.y*this.k0/this.a),s=I(this.long0+e.x/(this.a*this.k0))),e.x=s,e.y=a,e}var du=["cea"];const _u={init:uu,forward:fu,inverse:cu,names:du};function mu(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function vu(e){var s=e.x,a=e.y,h=I(s-this.long0),o=Ai(a-this.lat0);return e.x=this.x0+this.a*h*this.rc,e.y=this.y0+this.a*o,e}function pu(e){var s=e.x,a=e.y;return e.x=I(this.long0+(s-this.x0)/(this.a*this.rc)),e.y=Ai(this.lat0+(a-this.y0)/this.a),e}var gu=["Equirectangular","Equidistant_Cylindrical","eqc"];const yu={init:mu,forward:vu,inverse:pu,names:gu};var la=20;function Mu(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ae(this.es),this.e1=re(this.es),this.e2=oe(this.es),this.e3=he(this.es),this.ml0=this.a*gt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function xu(e){var s=e.x,a=e.y,h,o,u,c=I(s-this.long0);if(u=c*Math.sin(a),this.sphere)Math.abs(a)<=E?(h=this.a*c,o=-1*this.a*this.lat0):(h=this.a*Math.sin(u)/Math.tan(a),o=this.a*(Ai(a-this.lat0)+(1-Math.cos(u))/Math.tan(a)));else if(Math.abs(a)<=E)h=this.a*c,o=-1*this.ml0;else{var f=Ei(this.a,this.e,Math.sin(a))/Math.tan(a);h=f*Math.sin(u),o=this.a*gt(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+f*(1-Math.cos(u))}return e.x=h+this.x0,e.y=o+this.y0,e}function wu(e){var s,a,h,o,u,c,f,_,m;if(h=e.x-this.x0,o=e.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=E)s=I(h/this.a+this.long0),a=0;else{c=this.lat0+o/this.a,f=h*h/this.a/this.a+c*c,_=c;var y;for(u=la;u;--u)if(y=Math.tan(_),m=-1*(c*(_*y+1)-_-.5*(_*_+f)*y)/((_-c)/y-1),_+=m,Math.abs(m)<=E){a=_;break}s=I(this.long0+Math.asin(h*Math.tan(_)/this.a)/Math.sin(a))}else if(Math.abs(o+this.ml0)<=E)a=0,s=I(this.long0+h/this.a);else{c=(this.ml0+o)/this.a,f=h*h/this.a/this.a+c*c,_=c;var p,x,P,b,w;for(u=la;u;--u)if(w=this.e*Math.sin(_),p=Math.sqrt(1-w*w)*Math.tan(_),x=this.a*gt(this.e0,this.e1,this.e2,this.e3,_),P=this.e0-2*this.e1*Math.cos(2*_)+4*this.e2*Math.cos(4*_)-6*this.e3*Math.cos(6*_),b=x/this.a,m=(c*(p*b+1)-b-.5*p*(b*b+f))/(this.es*Math.sin(2*_)*(b*b+f-2*c*b)/(4*p)+(c-b)*(p*P-2/Math.sin(2*_))-P),_-=m,Math.abs(m)<=E){a=_;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(a),2))*Math.tan(a),s=I(this.long0+Math.asin(h*p/this.a)/Math.sin(a))}return e.x=s,e.y=a,e}var bu=["Polyconic","poly"];const Pu={init:Mu,forward:xu,inverse:wu,names:bu};function Lu(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Tu(e){var s,a=e.x,h=e.y,o=h-this.lat0,u=a-this.long0,c=o/Xi*1e-5,f=u,_=1,m=0;for(s=1;s<=10;s++)_=_*c,m=m+this.A[s]*_;var y=m,p=f,x=1,P=0,b,w,S=0,O=0;for(s=1;s<=6;s++)b=x*y-P*p,w=P*y+x*p,x=b,P=w,S=S+this.B_re[s]*x-this.B_im[s]*P,O=O+this.B_im[s]*x+this.B_re[s]*P;return e.x=O*this.a+this.x0,e.y=S*this.a+this.y0,e}function Cu(e){var s,a=e.x,h=e.y,o=a-this.x0,u=h-this.y0,c=u/this.a,f=o/this.a,_=1,m=0,y,p,x=0,P=0;for(s=1;s<=6;s++)y=_*c-m*f,p=m*c+_*f,_=y,m=p,x=x+this.C_re[s]*_-this.C_im[s]*m,P=P+this.C_im[s]*_+this.C_re[s]*m;for(var b=0;b<this.iterations;b++){var w=x,S=P,O,R,z=c,V=f;for(s=2;s<=6;s++)O=w*x-S*P,R=S*x+w*P,w=O,S=R,z=z+(s-1)*(this.B_re[s]*w-this.B_im[s]*S),V=V+(s-1)*(this.B_im[s]*w+this.B_re[s]*S);w=1,S=0;var W=this.B_re[1],H=this.B_im[1];for(s=2;s<=6;s++)O=w*x-S*P,R=S*x+w*P,w=O,S=R,W=W+s*(this.B_re[s]*w-this.B_im[s]*S),H=H+s*(this.B_im[s]*w+this.B_re[s]*S);var lt=W*W+H*H;x=(z*W+V*H)/lt,P=(V*W-z*H)/lt}var Y=x,yt=P,kt=1,nt=0;for(s=1;s<=9;s++)kt=kt*Y,nt=nt+this.D[s]*kt;var ct=this.lat0+nt*Xi*1e5,Ge=this.long0+yt;return e.x=Ge,e.y=ct,e}var Su=["New_Zealand_Map_Grid","nzmg"];const Eu={init:Lu,forward:Tu,inverse:Cu,names:Su};function Au(){}function Iu(e){var s=e.x,a=e.y,h=I(s-this.long0),o=this.x0+this.a*h,u=this.y0+this.a*Math.log(Math.tan(Math.PI/4+a/2.5))*1.25;return e.x=o,e.y=u,e}function Ou(e){e.x-=this.x0,e.y-=this.y0;var s=I(this.long0+e.x/this.a),a=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=s,e.y=a,e}var Nu=["Miller_Cylindrical","mill"];const zu={init:Au,forward:Iu,inverse:Ou,names:Nu};var ku=20;function Ru(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Ca(this.es)}function Bu(e){var s,a,h=e.x,o=e.y;if(h=I(h-this.long0),this.sphere){if(!this.m)o=this.n!==1?Math.asin(this.n*Math.sin(o)):o;else for(var u=this.n*Math.sin(o),c=ku;c;--c){var f=(this.m*o+Math.sin(o)-u)/(this.m+Math.cos(o));if(o-=f,Math.abs(f)<E)break}s=this.a*this.C_x*h*(this.m+Math.cos(o)),a=this.a*this.C_y*o}else{var _=Math.sin(o),m=Math.cos(o);a=this.a*qe(o,_,m,this.en),s=this.a*h*m/Math.sqrt(1-this.es*_*_)}return e.x=s,e.y=a,e}function Zu(e){var s,a,h,o;return e.x-=this.x0,h=e.x/this.a,e.y-=this.y0,s=e.y/this.a,this.sphere?(s/=this.C_y,h=h/(this.C_x*(this.m+Math.cos(s))),this.m?s=ei((this.m*s+Math.sin(s))/this.n):this.n!==1&&(s=ei(Math.sin(s)/this.n)),h=I(h+this.long0),s=Ai(s)):(s=Sa(e.y/this.a,this.es,this.en),o=Math.abs(s),o<C?(o=Math.sin(s),a=this.long0+e.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(s)),h=I(a)):o-E<C&&(h=this.long0)),e.x=h,e.y=s,e}var Du=["Sinusoidal","sinu"];const qu={init:Ru,forward:Bu,inverse:Zu,names:Du};function Gu(){}function Fu(e){for(var s=e.x,a=e.y,h=I(s-this.long0),o=a,u=Math.PI*Math.sin(a);;){var c=-(o+Math.sin(o)-u)/(1+Math.cos(o));if(o+=c,Math.abs(c)<E)break}o/=2,Math.PI/2-Math.abs(a)<E&&(h=0);var f=.900316316158*this.a*h*Math.cos(o)+this.x0,_=1.4142135623731*this.a*Math.sin(o)+this.y0;return e.x=f,e.y=_,e}function Wu(e){var s,a;e.x-=this.x0,e.y-=this.y0,a=e.y/(1.4142135623731*this.a),Math.abs(a)>.999999999999&&(a=.999999999999),s=Math.asin(a);var h=I(this.long0+e.x/(.900316316158*this.a*Math.cos(s)));h<-Math.PI&&(h=-Math.PI),h>Math.PI&&(h=Math.PI),a=(2*s+Math.sin(2*s))/Math.PI,Math.abs(a)>1&&(a=1);var o=Math.asin(a);return e.x=h,e.y=o,e}var Hu=["Mollweide","moll"];const Uu={init:Gu,forward:Fu,inverse:Wu,names:Hu};function $u(){Math.abs(this.lat1+this.lat2)<E||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ae(this.es),this.e1=re(this.es),this.e2=oe(this.es),this.e3=he(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Wt(this.e,this.sinphi,this.cosphi),this.ml1=gt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<E?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Wt(this.e,this.sinphi,this.cosphi),this.ml2=gt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=gt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function ju(e){var s=e.x,a=e.y,h;if(this.sphere)h=this.a*(this.g-a);else{var o=gt(this.e0,this.e1,this.e2,this.e3,a);h=this.a*(this.g-o)}var u=this.ns*I(s-this.long0),c=this.x0+h*Math.sin(u),f=this.y0+this.rh-h*Math.cos(u);return e.x=c,e.y=f,e}function Vu(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var s,a,h,o;this.ns>=0?(a=Math.sqrt(e.x*e.x+e.y*e.y),s=1):(a=-Math.sqrt(e.x*e.x+e.y*e.y),s=-1);var u=0;if(a!==0&&(u=Math.atan2(s*e.x,s*e.y)),this.sphere)return o=I(this.long0+u/this.ns),h=Ai(this.g-a/this.a),e.x=o,e.y=h,e;var c=this.g-a/this.a;return h=Re(c,this.e0,this.e1,this.e2,this.e3),o=I(this.long0+u/this.ns),e.x=o,e.y=h,e}var Ku=["Equidistant_Conic","eqdc"];const Xu={init:$u,forward:ju,inverse:Vu,names:Ku};function Qu(){this.R=this.a}function Ju(e){var s=e.x,a=e.y,h=I(s-this.long0),o,u;Math.abs(a)<=E&&(o=this.x0+this.R*h,u=this.y0);var c=ei(2*Math.abs(a/Math.PI));(Math.abs(h)<=E||Math.abs(Math.abs(a)-C)<=E)&&(o=this.x0,a>=0?u=this.y0+Math.PI*this.R*Math.tan(.5*c):u=this.y0+Math.PI*this.R*-Math.tan(.5*c));var f=.5*Math.abs(Math.PI/h-h/Math.PI),_=f*f,m=Math.sin(c),y=Math.cos(c),p=y/(m+y-1),x=p*p,P=p*(2/m-1),b=P*P,w=Math.PI*this.R*(f*(p-b)+Math.sqrt(_*(p-b)*(p-b)-(b+_)*(x-b)))/(b+_);h<0&&(w=-w),o=this.x0+w;var S=_+p;return w=Math.PI*this.R*(P*S-f*Math.sqrt((b+_)*(_+1)-S*S))/(b+_),a>=0?u=this.y0+w:u=this.y0-w,e.x=o,e.y=u,e}function Yu(e){var s,a,h,o,u,c,f,_,m,y,p,x,P;return e.x-=this.x0,e.y-=this.y0,p=Math.PI*this.R,h=e.x/p,o=e.y/p,u=h*h+o*o,c=-Math.abs(o)*(1+u),f=c-2*o*o+h*h,_=-2*c+1+2*o*o+u*u,P=o*o/_+(2*f*f*f/_/_/_-9*c*f/_/_)/27,m=(c-f*f/3/_)/_,y=2*Math.sqrt(-m/3),p=3*P/m/y,Math.abs(p)>1&&(p>=0?p=1:p=-1),x=Math.acos(p)/3,e.y>=0?a=(-y*Math.cos(x+Math.PI/3)-f/3/_)*Math.PI:a=-(-y*Math.cos(x+Math.PI/3)-f/3/_)*Math.PI,Math.abs(h)<E?s=this.long0:s=I(this.long0+Math.PI*(u-1+Math.sqrt(1+2*(h*h-o*o)+u*u))/2/h),e.x=s,e.y=a,e}var tf=["Van_der_Grinten_I","VanDerGrinten","vandg"];const ef={init:Qu,forward:Ju,inverse:Yu,names:tf};function nf(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function sf(e){var s=e.x,a=e.y,h=Math.sin(e.y),o=Math.cos(e.y),u=I(s-this.long0),c,f,_,m,y,p,x,P,b,w,S,O,R,z,V,W,H,lt,Y,yt,kt,nt,ct;return this.sphere?Math.abs(this.sin_p12-1)<=E?(e.x=this.x0+this.a*(C-a)*Math.sin(u),e.y=this.y0-this.a*(C-a)*Math.cos(u),e):Math.abs(this.sin_p12+1)<=E?(e.x=this.x0+this.a*(C+a)*Math.sin(u),e.y=this.y0+this.a*(C+a)*Math.cos(u),e):(lt=this.sin_p12*h+this.cos_p12*o*Math.cos(u),W=Math.acos(lt),H=W?W/Math.sin(W):1,e.x=this.x0+this.a*H*o*Math.sin(u),e.y=this.y0+this.a*H*(this.cos_p12*h-this.sin_p12*o*Math.cos(u)),e):(c=ae(this.es),f=re(this.es),_=oe(this.es),m=he(this.es),Math.abs(this.sin_p12-1)<=E?(y=this.a*gt(c,f,_,m,C),p=this.a*gt(c,f,_,m,a),e.x=this.x0+(y-p)*Math.sin(u),e.y=this.y0-(y-p)*Math.cos(u),e):Math.abs(this.sin_p12+1)<=E?(y=this.a*gt(c,f,_,m,C),p=this.a*gt(c,f,_,m,a),e.x=this.x0+(y+p)*Math.sin(u),e.y=this.y0+(y+p)*Math.cos(u),e):(x=h/o,P=Ei(this.a,this.e,this.sin_p12),b=Ei(this.a,this.e,h),w=Math.atan((1-this.es)*x+this.es*P*this.sin_p12/(b*o)),S=Math.atan2(Math.sin(u),this.cos_p12*Math.tan(w)-this.sin_p12*Math.cos(u)),S===0?Y=Math.asin(this.cos_p12*Math.sin(w)-this.sin_p12*Math.cos(w)):Math.abs(Math.abs(S)-Math.PI)<=E?Y=-Math.asin(this.cos_p12*Math.sin(w)-this.sin_p12*Math.cos(w)):Y=Math.asin(Math.sin(u)*Math.cos(w)/Math.sin(S)),O=this.e*this.sin_p12/Math.sqrt(1-this.es),R=this.e*this.cos_p12*Math.cos(S)/Math.sqrt(1-this.es),z=O*R,V=R*R,yt=Y*Y,kt=yt*Y,nt=kt*Y,ct=nt*Y,W=P*Y*(1-yt*V*(1-V)/6+kt/8*z*(1-2*V)+nt/120*(V*(4-7*V)-3*O*O*(1-7*V))-ct/48*z),e.x=this.x0+W*Math.sin(S),e.y=this.y0+W*Math.cos(S),e))}function af(e){e.x-=this.x0,e.y-=this.y0;var s,a,h,o,u,c,f,_,m,y,p,x,P,b,w,S,O,R,z,V,W,H,lt,Y;return this.sphere?(s=Math.sqrt(e.x*e.x+e.y*e.y),s>2*C*this.a?void 0:(a=s/this.a,h=Math.sin(a),o=Math.cos(a),u=this.long0,Math.abs(s)<=E?c=this.lat0:(c=ei(o*this.sin_p12+e.y*h*this.cos_p12/s),f=Math.abs(this.lat0)-C,Math.abs(f)<=E?this.lat0>=0?u=I(this.long0+Math.atan2(e.x,-e.y)):u=I(this.long0-Math.atan2(-e.x,e.y)):u=I(this.long0+Math.atan2(e.x*h,s*this.cos_p12*o-e.y*this.sin_p12*h))),e.x=u,e.y=c,e)):(_=ae(this.es),m=re(this.es),y=oe(this.es),p=he(this.es),Math.abs(this.sin_p12-1)<=E?(x=this.a*gt(_,m,y,p,C),s=Math.sqrt(e.x*e.x+e.y*e.y),P=x-s,c=Re(P/this.a,_,m,y,p),u=I(this.long0+Math.atan2(e.x,-1*e.y)),e.x=u,e.y=c,e):Math.abs(this.sin_p12+1)<=E?(x=this.a*gt(_,m,y,p,C),s=Math.sqrt(e.x*e.x+e.y*e.y),P=s-x,c=Re(P/this.a,_,m,y,p),u=I(this.long0+Math.atan2(e.x,e.y)),e.x=u,e.y=c,e):(s=Math.sqrt(e.x*e.x+e.y*e.y),S=Math.atan2(e.x,e.y),b=Ei(this.a,this.e,this.sin_p12),O=Math.cos(S),R=this.e*this.cos_p12*O,z=-R*R/(1-this.es),V=3*this.es*(1-z)*this.sin_p12*this.cos_p12*O/(1-this.es),W=s/b,H=W-z*(1+z)*Math.pow(W,3)/6-V*(1+3*z)*Math.pow(W,4)/24,lt=1-z*H*H/2-W*H*H*H/6,w=Math.asin(this.sin_p12*Math.cos(H)+this.cos_p12*Math.sin(H)*O),u=I(this.long0+Math.asin(Math.sin(S)*Math.sin(H)/Math.cos(w))),Y=Math.sin(w),c=Math.atan2((Y-this.es*lt*this.sin_p12)*Math.tan(w),Y*(1-this.es)),e.x=u,e.y=c,e))}var rf=["Azimuthal_Equidistant","aeqd"];const of={init:nf,forward:sf,inverse:af,names:rf};function hf(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function lf(e){var s,a,h,o,u,c,f,_,m=e.x,y=e.y;return h=I(m-this.long0),s=Math.sin(y),a=Math.cos(y),o=Math.cos(h),c=this.sin_p14*s+this.cos_p14*a*o,u=1,(c>0||Math.abs(c)<=E)&&(f=this.a*u*a*Math.sin(h),_=this.y0+this.a*u*(this.cos_p14*s-this.sin_p14*a*o)),e.x=f,e.y=_,e}function uf(e){var s,a,h,o,u,c,f;return e.x-=this.x0,e.y-=this.y0,s=Math.sqrt(e.x*e.x+e.y*e.y),a=ei(s/this.a),h=Math.sin(a),o=Math.cos(a),c=this.long0,Math.abs(s)<=E?(f=this.lat0,e.x=c,e.y=f,e):(f=ei(o*this.sin_p14+e.y*h*this.cos_p14/s),u=Math.abs(this.lat0)-C,Math.abs(u)<=E?(this.lat0>=0?c=I(this.long0+Math.atan2(e.x,-e.y)):c=I(this.long0-Math.atan2(-e.x,e.y)),e.x=c,e.y=f,e):(c=I(this.long0+Math.atan2(e.x*h,s*this.cos_p14*o-e.y*this.sin_p14*h)),e.x=c,e.y=f,e))}var ff=["ortho"];const cf={init:hf,forward:lf,inverse:uf,names:ff};var et={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},X={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function df(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=C-K/2?this.face=et.TOP:this.lat0<=-(C-K/2)?this.face=et.BOTTOM:Math.abs(this.long0)<=K?this.face=et.FRONT:Math.abs(this.long0)<=C+K?this.face=this.long0>0?et.RIGHT:et.LEFT:this.face=et.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function _f(e){var s={x:0,y:0},a,h,o,u,c,f,_={value:0};if(e.x-=this.long0,this.es!==0?a=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):a=e.y,h=e.x,this.face===et.TOP)u=C-a,h>=K&&h<=C+K?(_.value=X.AREA_0,o=h-C):h>C+K||h<=-(C+K)?(_.value=X.AREA_1,o=h>0?h-at:h+at):h>-(C+K)&&h<=-K?(_.value=X.AREA_2,o=h+C):(_.value=X.AREA_3,o=h);else if(this.face===et.BOTTOM)u=C+a,h>=K&&h<=C+K?(_.value=X.AREA_0,o=-h+C):h<K&&h>=-K?(_.value=X.AREA_1,o=-h):h<-K&&h>=-(C+K)?(_.value=X.AREA_2,o=-h-C):(_.value=X.AREA_3,o=h>0?-h+at:-h-at);else{var m,y,p,x,P,b,w;this.face===et.RIGHT?h=Ci(h,+C):this.face===et.BACK?h=Ci(h,+at):this.face===et.LEFT&&(h=Ci(h,-C)),x=Math.sin(a),P=Math.cos(a),b=Math.sin(h),w=Math.cos(h),m=P*w,y=P*b,p=x,this.face===et.FRONT?(u=Math.acos(m),o=Ee(u,p,y,_)):this.face===et.RIGHT?(u=Math.acos(y),o=Ee(u,p,-m,_)):this.face===et.BACK?(u=Math.acos(-m),o=Ee(u,p,-y,_)):this.face===et.LEFT?(u=Math.acos(-y),o=Ee(u,p,m,_)):(u=o=0,_.value=X.AREA_0)}return f=Math.atan(12/at*(o+Math.acos(Math.sin(o)*Math.cos(K))-C)),c=Math.sqrt((1-Math.cos(u))/(Math.cos(f)*Math.cos(f))/(1-Math.cos(Math.atan(1/Math.cos(o))))),_.value===X.AREA_1?f+=C:_.value===X.AREA_2?f+=at:_.value===X.AREA_3&&(f+=1.5*at),s.x=c*Math.cos(f),s.y=c*Math.sin(f),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,e.x=s.x,e.y=s.y,e}function mf(e){var s={lam:0,phi:0},a,h,o,u,c,f,_,m,y,p={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,h=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),a=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?p.value=X.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(p.value=X.AREA_1,a-=C):e.x<0&&-e.x>=Math.abs(e.y)?(p.value=X.AREA_2,a=a<0?a+at:a-at):(p.value=X.AREA_3,a+=C),y=at/12*Math.tan(a),c=Math.sin(y)/(Math.cos(y)-1/Math.sqrt(2)),f=Math.atan(c),o=Math.cos(a),u=Math.tan(h),_=1-o*o*u*u*(1-Math.cos(Math.atan(1/Math.cos(f)))),_<-1?_=-1:_>1&&(_=1),this.face===et.TOP)m=Math.acos(_),s.phi=C-m,p.value===X.AREA_0?s.lam=f+C:p.value===X.AREA_1?s.lam=f<0?f+at:f-at:p.value===X.AREA_2?s.lam=f-C:s.lam=f;else if(this.face===et.BOTTOM)m=Math.acos(_),s.phi=m-C,p.value===X.AREA_0?s.lam=-f+C:p.value===X.AREA_1?s.lam=-f:p.value===X.AREA_2?s.lam=-f-C:s.lam=f<0?-f-at:-f+at;else{var x,P,b;x=_,y=x*x,y>=1?b=0:b=Math.sqrt(1-y)*Math.sin(f),y+=b*b,y>=1?P=0:P=Math.sqrt(1-y),p.value===X.AREA_1?(y=P,P=-b,b=y):p.value===X.AREA_2?(P=-P,b=-b):p.value===X.AREA_3&&(y=P,P=b,b=-y),this.face===et.RIGHT?(y=x,x=-P,P=y):this.face===et.BACK?(x=-x,P=-P):this.face===et.LEFT&&(y=x,x=P,P=-y),s.phi=Math.acos(-b)-C,s.lam=Math.atan2(P,x),this.face===et.RIGHT?s.lam=Ci(s.lam,-C):this.face===et.BACK?s.lam=Ci(s.lam,-at):this.face===et.LEFT&&(s.lam=Ci(s.lam,+C))}if(this.es!==0){var w,S,O;w=s.phi<0?1:0,S=Math.tan(s.phi),O=this.b/Math.sqrt(S*S+this.one_minus_f_squared),s.phi=Math.atan(Math.sqrt(this.a*this.a-O*O)/(this.one_minus_f*O)),w&&(s.phi=-s.phi)}return s.lam+=this.long0,e.x=s.lam,e.y=s.phi,e}function Ee(e,s,a,h){var o;return e<E?(h.value=X.AREA_0,o=0):(o=Math.atan2(s,a),Math.abs(o)<=K?h.value=X.AREA_0:o>K&&o<=C+K?(h.value=X.AREA_1,o-=C):o>C+K||o<=-(C+K)?(h.value=X.AREA_2,o=o>=0?o-at:o+at):(h.value=X.AREA_3,o+=C)),o}function Ci(e,s){var a=e+s;return a<-at?a+=ie:a>+at&&(a-=ie),a}var vf=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const pf={init:df,forward:_f,inverse:mf,names:vf};var En=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Ki=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ia=.8487,Oa=1.3523,Na=Gt/5,gf=1/Na,Li=18,Be=function(e,s){return e[0]+s*(e[1]+s*(e[2]+s*e[3]))},yf=function(e,s){return e[1]+s*(2*e[2]+s*3*e[3])};function Mf(e,s,a,h){for(var o=s;h;--h){var u=e(o);if(o-=u,Math.abs(u)<a)break}return o}function xf(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function wf(e){var s=I(e.x-this.long0),a=Math.abs(e.y),h=Math.floor(a*Na);h<0?h=0:h>=Li&&(h=Li-1),a=Gt*(a-gf*h);var o={x:Be(En[h],a)*s,y:Be(Ki[h],a)};return e.y<0&&(o.y=-o.y),o.x=o.x*this.a*Ia+this.x0,o.y=o.y*this.a*Oa+this.y0,o}function bf(e){var s={x:(e.x-this.x0)/(this.a*Ia),y:Math.abs(e.y-this.y0)/(this.a*Oa)};if(s.y>=1)s.x/=En[Li][0],s.y=e.y<0?-C:C;else{var a=Math.floor(s.y*Li);for(a<0?a=0:a>=Li&&(a=Li-1);;)if(Ki[a][0]>s.y)--a;else if(Ki[a+1][0]<=s.y)++a;else break;var h=Ki[a],o=5*(s.y-h[0])/(Ki[a+1][0]-h[0]);o=Mf(function(u){return(Be(h,u)-s.y)/yf(h,u)},o,E,100),s.x/=Be(En[a],o),s.y=(5*a+o)*_t,e.y<0&&(s.y=-s.y)}return s.x=I(s.x+this.long0),s}var Pf=["Robinson","robin"];const Lf={init:xf,forward:wf,inverse:bf,names:Pf};function Tf(){this.name="geocent"}function Cf(e){var s=ga(e,this.es,this.a);return s}function Sf(e){var s=ya(e,this.es,this.a,this.b);return s}var Ef=["Geocentric","geocentric","geocent","Geocent"];const Af={init:Tf,forward:Cf,inverse:Sf,names:Ef};var mt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},$i={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function If(){if(Object.keys($i).forEach((function(a){if(typeof this[a]>"u")this[a]=$i[a].def;else{if($i[a].num&&isNaN(this[a]))throw new Error("Invalid parameter value, must be numeric "+a+" = "+this[a]);$i[a].num&&(this[a]=parseFloat(this[a]))}$i[a].degrees&&(this[a]=this[a]*_t)}).bind(this)),Math.abs(Math.abs(this.lat0)-C)<E?this.mode=this.lat0<0?mt.S_POLE:mt.N_POLE:Math.abs(this.lat0)<E?this.mode=mt.EQUIT:(this.mode=mt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,s=this.azi;this.cg=Math.cos(s),this.sg=Math.sin(s),this.cw=Math.cos(e),this.sw=Math.sin(e)}function Of(e){e.x-=this.long0;var s=Math.sin(e.y),a=Math.cos(e.y),h=Math.cos(e.x),o,u;switch(this.mode){case mt.OBLIQ:u=this.sinph0*s+this.cosph0*a*h;break;case mt.EQUIT:u=a*h;break;case mt.S_POLE:u=-s;break;case mt.N_POLE:u=s;break}switch(u=this.pn1/(this.p-u),o=u*a*Math.sin(e.x),this.mode){case mt.OBLIQ:u*=this.cosph0*s-this.sinph0*a*h;break;case mt.EQUIT:u*=s;break;case mt.N_POLE:u*=-(a*h);break;case mt.S_POLE:u*=a*h;break}var c,f;return c=u*this.cg+o*this.sg,f=1/(c*this.sw*this.h1+this.cw),o=(o*this.cg-u*this.sg)*this.cw*f,u=c*f,e.x=o*this.a,e.y=u*this.a,e}function Nf(e){e.x/=this.a,e.y/=this.a;var s={x:e.x,y:e.y},a,h,o;o=1/(this.pn1-e.y*this.sw),a=this.pn1*e.x*o,h=this.pn1*e.y*this.cw*o,e.x=a*this.cg+h*this.sg,e.y=h*this.cg-a*this.sg;var u=It(e.x,e.y);if(Math.abs(u)<E)s.x=0,s.y=e.y;else{var c,f;switch(f=1-u*u*this.pfact,f=(this.p-Math.sqrt(f))/(this.pn1/u+u/this.pn1),c=Math.sqrt(1-f*f),this.mode){case mt.OBLIQ:s.y=Math.asin(c*this.sinph0+e.y*f*this.cosph0/u),e.y=(c-this.sinph0*Math.sin(s.y))*u,e.x*=f*this.cosph0;break;case mt.EQUIT:s.y=Math.asin(e.y*f/u),e.y=c*u,e.x*=f;break;case mt.N_POLE:s.y=Math.asin(c),e.y=-e.y;break;case mt.S_POLE:s.y=-Math.asin(c);break}s.x=Math.atan2(e.x,e.y)}return e.x=s.x+this.long0,e.y=s.y,e}var zf=["Tilted_Perspective","tpers"];const kf={init:If,forward:Of,inverse:Nf,names:zf};function Rf(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,s=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=s,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Bf(e){var s=e.x,a=e.y,h,o,u,c;if(s=s-this.long0,this.shape==="ellipse"){a=Math.atan(this.radius_p2*Math.tan(a));var f=this.radius_p/It(this.radius_p*Math.cos(a),Math.sin(a));if(o=f*Math.cos(s)*Math.cos(a),u=f*Math.sin(s)*Math.cos(a),c=f*Math.sin(a),(this.radius_g-o)*o-u*u-c*c*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;h=this.radius_g-o,this.flip_axis?(e.x=this.radius_g_1*Math.atan(u/It(c,h)),e.y=this.radius_g_1*Math.atan(c/h)):(e.x=this.radius_g_1*Math.atan(u/h),e.y=this.radius_g_1*Math.atan(c/It(u,h)))}else this.shape==="sphere"&&(h=Math.cos(a),o=Math.cos(s)*h,u=Math.sin(s)*h,c=Math.sin(a),h=this.radius_g-o,this.flip_axis?(e.x=this.radius_g_1*Math.atan(u/It(c,h)),e.y=this.radius_g_1*Math.atan(c/h)):(e.x=this.radius_g_1*Math.atan(u/h),e.y=this.radius_g_1*Math.atan(c/It(u,h))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function Zf(e){var s=-1,a=0,h=0,o,u,c,f;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(h=Math.tan(e.y/this.radius_g_1),a=Math.tan(e.x/this.radius_g_1)*It(1,h)):(a=Math.tan(e.x/this.radius_g_1),h=Math.tan(e.y/this.radius_g_1)*It(1,a));var _=h/this.radius_p;if(o=a*a+_*_+s*s,u=2*this.radius_g*s,c=u*u-4*o*this.C,c<0)return e.x=Number.NaN,e.y=Number.NaN,e;f=(-u-Math.sqrt(c))/(2*o),s=this.radius_g+f*s,a*=f,h*=f,e.x=Math.atan2(a,s),e.y=Math.atan(h*Math.cos(e.x)/s),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(h=Math.tan(e.y/this.radius_g_1),a=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+h*h)):(a=Math.tan(e.x/this.radius_g_1),h=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+a*a)),o=a*a+h*h+s*s,u=2*this.radius_g*s,c=u*u-4*o*this.C,c<0)return e.x=Number.NaN,e.y=Number.NaN,e;f=(-u-Math.sqrt(c))/(2*o),s=this.radius_g+f*s,a*=f,h*=f,e.x=Math.atan2(a,s),e.y=Math.atan(h*Math.cos(e.x)/s)}return e.x=e.x+this.long0,e}var Df=["Geostationary Satellite View","Geostationary_Satellite","geos"];const qf={init:Rf,forward:Bf,inverse:Zf,names:Df};var Qi=1.340264,Ji=-.081106,Yi=893e-6,te=.003796,Ze=Math.sqrt(3)/2;function Gf(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function Ff(e){var s=I(e.x-this.long0),a=e.y,h=Math.asin(Ze*Math.sin(a)),o=h*h,u=o*o*o;return e.x=s*Math.cos(h)/(Ze*(Qi+3*Ji*o+u*(7*Yi+9*te*o))),e.y=h*(Qi+Ji*o+u*(Yi+te*o)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Wf(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var s=1e-9,a=12,h=e.y,o,u,c,f,_,m;for(m=0;m<a&&(o=h*h,u=o*o*o,c=h*(Qi+Ji*o+u*(Yi+te*o))-e.y,f=Qi+3*Ji*o+u*(7*Yi+9*te*o),h-=_=c/f,!(Math.abs(_)<s));++m);return o=h*h,u=o*o*o,e.x=Ze*e.x*(Qi+3*Ji*o+u*(7*Yi+9*te*o))/Math.cos(h),e.y=Math.asin(Math.sin(h)/Ze),e.x=I(e.x+this.long0),e}var Hf=["eqearth","Equal Earth","Equal_Earth"];const Uf={init:Gf,forward:Ff,inverse:Wf,names:Hf};function $f(e){e.Proj.projections.add(Ie),e.Proj.projections.add(Oe),e.Proj.projections.add($h),e.Proj.projections.add(el),e.Proj.projections.add(hl),e.Proj.projections.add(dl),e.Proj.projections.add(yl),e.Proj.projections.add(Pl),e.Proj.projections.add(El),e.Proj.projections.add(zl),e.Proj.projections.add(Ql),e.Proj.projections.add(nu),e.Proj.projections.add(hu),e.Proj.projections.add(_u),e.Proj.projections.add(yu),e.Proj.projections.add(Pu),e.Proj.projections.add(Eu),e.Proj.projections.add(zu),e.Proj.projections.add(qu),e.Proj.projections.add(Uu),e.Proj.projections.add(Xu),e.Proj.projections.add(ef),e.Proj.projections.add(of),e.Proj.projections.add(cf),e.Proj.projections.add(pf),e.Proj.projections.add(Lf),e.Proj.projections.add(Af),e.Proj.projections.add(kf),e.Proj.projections.add(qf),e.Proj.projections.add(Uf)}Tt.defaultDatum="WGS84";Tt.Proj=Ft;Tt.WGS84=new Tt.Proj("WGS84");Tt.Point=Si;Tt.toPoint=Ma;Tt.defs=pt;Tt.nadgrid=Vo;Tt.transform=ke;Tt.mgrs=uh;Tt.version="__VERSION__";$f(Tt);const hi={RD:{code:"EPSG:28992",projection:"+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +units=m +towgs84=565.2369,50.0087,465.658,-0.406857330322398,0.350732676542563,-1.8703473836068,4.0812 +no_defs",transformation:{bounds:{topLeft:[-285401,903401],bottomRight:[595401.92,22598.08]}}},WGS84:{code:"EPSG:4326",projection:"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"},EARTH_RADIUS:6378137},ua=Tt(hi.WGS84.code,hi.RD.projection),Vf=(e=16,s=3440.64,a=[])=>{for(let h=0;h<=e;h++)a.push(1/(s*.5**h));return{...Mi.CRS.Simple,code:hi.RD.code,infinite:!1,projection:{project:h=>{const[o,u]=ua.forward([h.lng,h.lat]);return new Mi.Point(o,u)},unproject:h=>{const[o,u]=ua.inverse([h.x,h.y]);return Mi.latLng(u,o)},bounds:Mi.bounds(hi.RD.transformation.bounds.topLeft,hi.RD.transformation.bounds.bottomRight),proj4def:hi.RD.projection},transformation:new Mi.Transformation(1,285401.92,-1,903401.92),distance:Mi.CRS.Earth.distance,R:hi.EARTH_RADIUS,scale:h=>a[h]?a[h]:1/(s*.5**h),zoom:h=>Math.log(1/h/s)/Math.log(.5)}};export{Mi as L,Vf as g,oo as l};
