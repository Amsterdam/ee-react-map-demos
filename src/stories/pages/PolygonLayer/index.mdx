import { Canvas, Meta, Source, Story } from '@storybook/blocks';
import * as PolygonLayerStories from './index.stories';
import PolygonLayer from '@/pages/PolygonLayer/PolygonLayer?raw';
import styles from '@/pages/PolygonLayer/styles.module.css?raw';
import layerStyles from '@/pages/PolygonLayer/layerStyles?raw';
import data from '@/pages/PolygonLayer/data.json?raw';

<Meta of={PolygonLayerStories} />

# PolygonLayer

## Requirements

- This example is built upon the [BaseMap component example](../?path=/docs/react-baselayer--docs).
- [See global requirements list](../?path=/docs/global-requirements--docs)

## Description

A polygon layer is used to display a location or area on a map. By default, a polygon layer is a HTML SVG element rendered inside the parent map DOM element. This polygon layer can be configured, extended and restyled ([see docs](https://leafletjs.com/reference.html#polygon)).

The primary code in regards to creating a Leaflet polygon layer, is lines 64-87:

```js
useEffect(() => {
  if (mapInstance) {
    // TypeScript will often throw errors with Leaflet coordinate sets if you don't explicitly cast the type
    polygonRef.current = L.polygon(
      data.geometry.coordinates as LatLngTuple[][][],
      {
        className: 'c-layer',
      }
    )
    .addTo(mapInstance)
    .on('mouseover', () => {
      polygonRef.current?.setStyle(polygonHoverStyles);
    })
    .on('mouseout', () => {
      polygonRef.current?.setStyle(polygonStyles);
    });
  }

  return () => {
    if (polygonRef.current && mapInstance) {
      mapInstance.removeLayer(polygonRef.current);
    }
  };
}, [data, mapInstance]);
```

## Usage Scenarios

- **Mapping Regions**: Representing administrative boundaries such as countries, states, or municipalities.
- **Highlighting Zones**: Indicating specific zones like school districts, voting districts, or postal codes.
- **Spatial Analysis**: Visualizing areas affected by events such as weather phenomena, natural disasters, or market areas.
- **Interactive Applications**: Enabling users to draw and interact with polygons to create custom regions for analysis or reporting.

## How to implement

To implement a Leaflet polygon layer there are three files required, this example also uses an extra file for demo data:

1. The React components
    - [PolygonLayer.tsx](#1-polygonlayertsx)
2. The CSS styles (1 file)
    - [styles.module.css](#1-stylesmodulecss)
3. The layer styles
    - [layerStyles.ts](#1-layerstylests)
4. Demo data (1 file)
    - [data.json](#1-datajson)
      - This data represents the coordinates for Vondelpark.

## Usage

The following files are required:

### React Components

#### 1. PolygonLayer.tsx

<Source code={PolygonLayer} />

### CSS Styling

#### 1. styles.module.css

<Source code={styles} />

### Layer styles

#### 1. layerStyles.ts

<Source code={layerStyles} />

### Utils

#### 1. data.json

<Source code={data} />
