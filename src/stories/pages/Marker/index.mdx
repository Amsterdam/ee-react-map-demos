import { Canvas, Meta, Source, Story } from '@storybook/blocks';
import * as MarkerStories from './index.stories';
import Marker from '@/pages/Marker/index?raw';
import styles from '@/pages/Marker/styles.module.css?raw';
import customMarker from '@/pages/Marker/icons/customMarker?raw';
import icon from '@/assets/icons/map-marker.svg?raw';

<Meta of={MarkerStories} />

# Marker
## Requirements

- This example is built upon the [BaseMap component example](../?path=/docs/react-baselayer--docs).
  - [See global requirements list](../?path=/docs/global-requirements--docs)

## Description

A marker is used to display a location on a map. By default, a marker is a HTML image element rendered inside the parent map DOM element. This marker element can be configured, extended and (like in this example) replaced with another icon.

In this code example, the default Leaflet marker ([example](https://leafletjs.com/examples/layers-control/)) is replaced with the `L.icon` ([docs](https://leafletjs.com/reference.html#icon)); another alternative to this is the `L.divIcon` ([docs](https://leafletjs.com/reference.html#divicon)).

The primary code in regards to creating a Leaflet marker, is lines 50-59:

```js
useEffect(() => {
  if (mapInstance) {
    const marker = L.marker(L.latLng([52.370216, 4.895168]), {
      // There are many more options to choose from @see https://leafletjs.com/reference.html#marker
      icon: customMarker
    }).addTo(mapInstance)
      .on('click', () => alert('Marker click!'));
    setMarkerInstance(marker);
  }
}, [mapInstance]);
```

This creates a marker at the coordinates (52.370216, 4.895168), which is added to the map (via the `addTo` method) and includes an example event listener that will be triggered on marker clicks. Then in the rest of the code, this marker element, can be referred to via the `markerInstance` state variable and interacted with using Leaflet methods.

A Leaflet marker element consists of [events](https://leafletjs.com/reference.html#marker-move), [methods](https://leafletjs.com/reference.html#marker-l-marker) and [options](https://leafletjs.com/reference.html#marker-icon).

## Usage Scenarios

- **Location Pins**: Highlighting specific locations such as restaurants, shops, landmarks, etc.
- **Data Visualization**: Displaying data points like weather stations, earthquake epicenters, etc.
- **Interactive Maps**: Providing interactive elements for user interaction, such as selecting meeting points or identifying places of interest.

## How to implement

To implement a Leaflet marker, there are three files:

1. The React component
    * [Marker.tsx](#1-markertsx)
      * *This is based on the [BaseMap component example](../?path=/docs/react-baselayer--docs) so includes a dependency on [`utils/getCrsRd`](../?path=/docs/react-baselayer--docs#1-getcrsrdts).*
2. The custom icon
    * [icons/customMarker.tsx](#1-iconscustommarkertsx)
3. The CSS styles (1 file)
    * [styles.module.css](#1-stylesmodulecss)
3. Image
    * [assets/icons/map-marker.svg](#1-map-markersvg)

## Usage

### React Components

#### 1. Marker.tsx

<Source code={Marker} />

### Custom icon

#### 1. icons/customMarker.tsx

<Source code={customMarker} />

### CSS Styling

#### 1. styles.module.css

<Source code={styles} />

### Assets

#### 1. map-marker.svg

<Source code={icon} />
